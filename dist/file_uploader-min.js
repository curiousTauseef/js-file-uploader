"use strict";
/*!@preserve
 *
 * FileUploader 2.0
 * HTML5 / JS Async Uploader
 * Massimo Cassandro 2017-2019
 *
 */var FileUploader2=function(){var e;return{}}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,l=new Array(e.length);t<e.length;t++)l[t]=e[t];return l}}FileUploader2=function(e){var t={auto:null,img:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp",".png",".jpg",".jpeg",".pjpg",".pjpeg",".gif",".webp"],pdf:["application/pdf",".pdf"]},l="file_uploader2",r=function e(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window},n=function e(t,l){if(t){var r,n,a;if(isNaN(t)){if(n=t.substr(-2,2).toUpperCase(),a=r=+t.substr(0,t.length-2),isNaN(r)||"KB"!==n&&"MB"!==n)return!1}else r=+t,n="KB",a=t;return r>=1024&&"KB"===n&&(n="MB",a=Math.round(r/1024*100)/100),"KB"===n?r*=1024:r=1024*r*1024,{maxbytes:r,feedback_size:a.toLocaleString(l)+"&nbsp;"+n}}return null};return e.init=function(l){var a=e.setOptions(l);r()?(a.css&&document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="'+a.css+'" type="text/css" media="all">'),document.querySelectorAll("[data-file_uploader2]").forEach(function(l){var r=l.dataset.file_uploader2;r=""===r?{}:JSON.parse(r),delete(r=e.setOptions({},a,l.dataset,r)).file_uploader2,r.element=l;try{var o=l.querySelector('input[type="file"]');if(!r.url)throw new Error("Parametro `url` non impostato");if(r.filetype=r.filetype.toLowerCase(),-1===Object.keys(t).indexOf(r.filetype))throw new Error("Parametro `filetype` non corretto");if("auto"===r.filetype){var i=[],u=[];null!==r.accept&&(u=r.accept.split(",").map(function(e){return e.trim()})),o&&o.getAttribute("accept")&&(i=o.getAttribute("accept").split(",").map(function(e){return e.trim()})),r.accept=_toConsumableArray(new Set([].concat(_toConsumableArray(u),_toConsumableArray(i))))}else r.accept=t[r.filetype];var s=n(r.max_filesize,r.locales);if(!1===s)throw new Error('"'+r.max_filesize+'" non è un valore corretto per `max_filesize`');r.max_filesize=s,r.multiple=Boolean(r.multiple||o&&o.hasAttribute("multiple")),r.required=Boolean(r.required||o&&o.hasAttribute("required"))}catch(e){console.error(e)}new e.createUploader(r)})):alert(a.unsuitableBrowserMessage)},e}((FileUploader2=function(e){return e.createUploader=function(e){if(e.debug){console.groupCollapsed("FileUploader options");var t={},l=Object.keys(e);l.sort(),l.forEach(function(l){var r="object"===_typeof(e[l])&&null!==e[l]&&"element"!==l;t[l]=r?JSON.stringify(e[l],null," "):e[l]}),console.table(t),console.log(e),console.groupEnd()}var r=e.element.querySelector("label"),n=e.element.querySelector('input[type="file"]');!e.uploader_label_text&&r&&(e.uploader_label_text=r.innerHTML),e.uploader_label_text||(e.uploader_label_text="__label non presente__"),e.element.innerHTML="",e.element.classList.add("fupl");var a=document.createElement("div");if(e.element.parentNode.insertBefore(a,e.element),a.appendChild(e.element),a.classList.add("fupl-wrapper"),a.classList.add("fupl-type-"+("img"===e.filetype?"img":"doc")),e.multiple&&a.classList.add("fupl-multiple"),e.element_class&&e.element.classList.add(e.element_class),e.uploader_add_label){var o=[];e.uploader_label_class&&o.push(e.uploader_label_class),e.required&&o.push("required"),e.element.insertAdjacentHTML("beforebegin",'<div class="fupl-label"><label'+(o.length?" class=\"#{_class.join(' ')}\"":"")+">"+e.uploader_label_text+"</label></div>"),a.classList.add("fupl-has-label")}null!==e.init_callback&&e.init_callback(e)},e}((FileUploader2=function(e){var t={css:null,debug:!1,locales:"it-IT",unsuitableBrowserMessage:"Il tuo browser non ha tutte le funzionalità richieste da FileUploader",alert_api:function e(t){window.alert(t)},url:null,filetype:"auto",accept:null,multiple:!1,required:!1,template:'<div class="card text-center" style="background-color: transparent"><div class="card-body"><div class="file_upl__button"></div><div class="file_upl__dd_text"></div></div><div class="card-footer text-muted small font-italic file_upl__info_text"></div></div>',init_callback:null,upload_start_callback:null,upload_complete_callback:null,element_class:null,element_dragover_class:null,uploader_label_text:null,uploader_add_label:!0,uploader_label_class:null,label_btn_class:"btn btn-primary btn-lg",dd_text_single:"oppure trascina qui un file",dd_text_multiple:"oppure trascina qui uno o più file",show_info_text:!0,custom_info_text:null,info_text_join_string:"<br>",img_min_w:null,img_max_w:null,img_w:null,img_min_h:null,img_max_h:null,img_h:null,max_filesize:null,varname:"file",values:[]};return e.setOptions=function(){for(var e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];if("function"==typeof Object.assign)return Object.assign.apply(Object,[{},t].concat(l));var n=function(){var e={},r=function r(n){e[n]=t[n],l.forEach(function(t){void 0!==t[n]&&(e[n]=t[n])})};for(var n in t)r(n);return{v:e}}();return"object"===_typeof(n)?n.v:void 0},e}(FileUploader2||{}))||{}))||{});
//# sourceMappingURL=file_uploader-min.js.map