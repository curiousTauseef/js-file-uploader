"use strict";
/*!@preserve
 *
 * FileUploader 2.0
 * HTML5 / JS Async Uploader
 * Massimo Cassandro 2017-2019
 *
 */var FileUploader2=function(){var e;return{}}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,l=new Array(e.length);t<e.length;t++)l[t]=e[t];return l}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,l=new Array(e.length);t<e.length;t++)l[t]=e[t];return l}}FileUploader2=function(e){var t={auto:null,img:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp",".png",".jpg",".jpeg",".pjpg",".pjpeg",".gif",".webp"],pdf:["application/pdf",".pdf"]},l="file_uploader2",n=function e(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window},i=function e(t,l){if(t){var n,i,a;if(isNaN(t)){if(i=t.substr(-2,2).toUpperCase(),a=n=+t.substr(0,t.length-2),isNaN(n)||"KB"!==i&&"MB"!==i)return!1}else n=+t,i="KB",a=t;return n>=1024&&"KB"===i&&(i="MB",a=Math.round(n/1024*100)/100),"KB"===i?n*=1024:n=1024*n*1024,{maxbytes:n,feedback_size:a.toLocaleString(l)+"&nbsp;"+i}}return null};return e.init=function(l){var a=e.setOptions(l);n()?(a.css&&document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="'+a.css+'" type="text/css" media="all">'),document.querySelectorAll("[data-file_uploader2]").forEach(function(l){var n=l.dataset.file_uploader2;n=""===n?{}:JSON.parse(n),delete(n=e.setOptions({},a,l.dataset,n)).file_uploader2,n.element=l;try{var r=l.querySelector('input[type="file"]');if(!n.url)throw new Error("Parametro `url` non impostato");if(n.filetype=n.filetype.toLowerCase(),-1===Object.keys(t).indexOf(n.filetype))throw new Error("Parametro `filetype` non corretto");if("auto"===n.filetype){var o=[],u=[];null!==n.accept&&(u=n.accept.split(",").map(function(e){return e.trim()})),r&&r.getAttribute("accept")&&(o=r.getAttribute("accept").split(",").map(function(e){return e.trim()})),n.accept=_toConsumableArray(new Set([].concat(_toConsumableArray(u),_toConsumableArray(o))))}else n.accept=t[n.filetype];var s=i(n.max_filesize,n.locales);if(!1===s)throw new Error('"'+n.max_filesize+'" non è un valore corretto per `max_filesize`');n.max_filesize=s,n.multiple=Boolean(n.multiple||r&&r.hasAttribute("multiple")),n.required=Boolean(n.required||r&&r.hasAttribute("required"))}catch(e){console.error(e)}new e.createUploader(n)})):alert(a.unsuitableBrowserMessage)},e}((FileUploader2=function(e){return e.createUploader=function(e){var t={_type:"img"===e.filetype?"img":"doc",_mode:e.multiple?"single":"multiple"},l=e.element.querySelector("label");!e.uploader_label_text&&l&&(e.uploader_label_text=l.innerHTML),e.uploader_label_text||(e.uploader_label_text="__label non presente__"),e.element.classList.add("fupl");var n=document.createElement("div"),i,a;(e.element.parentNode.insertBefore(n,e.element),n.appendChild(e.element),n.classList.add("fupl-wrapper"),n.classList.add("fupl-type-"+t._type),e.multiple&&n.classList.add("fupl-multiple"),e.element_class)&&(i=e.element.classList).add.apply(i,_toConsumableArray(e.element_class.split(" ")));if(e.uploader_add_label){var r=["fupl-label"];e.uploader_label_class&&r.push(e.uploader_label_class),e.required&&r.push("required"),e.element.insertAdjacentHTML("beforebegin",'<div class="fupl-label"><label'+(r.length?' class="'+r.join(" ")+'"':"")+">"+e.uploader_label_text+"</label></div>"),n.classList.add("fupl-has-label")}(e.element.innerHTML=e.templates.main,t=Object.assign(t,{input:e.element.querySelector('.fupl-panel input[type="file"]'),label:e.element.querySelector(".fupl-panel label"),dd_text:e.element.querySelector(".fupl-panel .fupl-dd-text"),info_text:e.element.querySelector(".fupl-panel .fupl-info-text"),result_wrapper:e.element.querySelector(".fupl-result")}),e.required&&t.input.setAttribute("required",""),e.multiple&&t.input.setAttribute("multiple",""),t.label.insertAdjacentHTML("beforeend",e.input_text[t._type][t._mode][0]),e.input_label_class)&&(a=t.label.classList).add.apply(a,_toConsumableArray(e.input_label_class.split(" ")));if(t.dd_text.innerHTML=e.input_text[t._type][t._mode][1],t.info_text.innerHTML="xxx",null!==e.init_callback&&e.init_callback(e),e.debug){console.groupCollapsed("FileUploader options");var o={},u=Object.keys(e);u.sort(),u.forEach(function(t){var l="object"===_typeof(e[t])&&null!==e[t]&&"element"!==t;o[t]=l?JSON.stringify(e[t],null," "):e[t]}),console.log("fupl_options"),console.table(o),console.log("upl_istance"),console.table(t),console.groupCollapsed("fupl_options"),console.log(e),console.groupEnd(),console.groupCollapsed("upl_istance"),console.log(t),console.groupEnd(),console.groupEnd()}},e}((FileUploader2=function(e){var t={css:null,debug:!1,locales:"it-IT",unsuitableBrowserMessage:"Il tuo browser non ha tutte le funzionalità richieste da FileUploader",alert_api:function e(t){window.alert(t)},url:null,filetype:"auto",accept:null,multiple:!1,required:!1,templates:{main:'<div class="fupl-result"></div><div class="fupl-panel"><div class="fupl-button"><label><input type="file"></label><div class="fupl-dd-text">{</div></div><div class="fupl-info-text"></div></div>',no_file:'<div class="fupl-result-empty text-muted small font-italic"></div>',remove_btn:'<button type="button" class="close" aria-label="Elimina" title="Elimina questo file"><span aria-hidden="true">&times;</span></button>',single_img:'<div class="fupl-item"><div class="fupl-elimina"></div><img alt="Immagine caricata" class="img-fluid"><div class="fupl-file-info"><div class="text-truncate fupl-file-name"></div><div class="fupl-file-size"></div></div></div>',multiple_imgs:'<div class="fupl-item"><div class="fupl-elimina"></div><div class="fupl-img"><img alt="Immagine caricata" class="img-fluid"></div><div class="fupl-file-info"><div class="text-truncate fupl-file-name"></div><div class="fupl-file-size"></div></div></div>',single_doc:'<div class="fupl-item"><div class="fupl-elimina"></div><div class="fupl-doc text-truncate"><a href="#" class="text-truncate fupl-file-name"></a></div><span class="small ml-1 text-nowrap fupl-file-size"></span></div>',multiple_docs:null},no_img_text:"Nessuna immagine presente",no_doc_text:"Nessun file presente",element_class:null,element_dragover_class:"fupl-is-dragover",uploader_label_text:null,uploader_add_label:!0,uploader_label_class:null,input_text:{img:{single:["Seleziona un'immagine","…oppure trascinala qui"],multiple:["Seleziona una o più immagini","…oppure trascinale qui"]},doc:{single:["Seleziona un documento","…oppure trascinalo qui"],multiple:["Seleziona uno o più documenti","…oppure trascinali qui"]}},input_label_class:"btn btn-outline-primary btn-sm",show_info_text:!0,info_text_wrap_string:["(",")"],info_text_join_string:", ",custom_info_text:null,img_min_w:null,img_max_w:null,img_w:null,img_min_h:null,img_max_h:null,img_h:null,max_filesize:null,varname:"file",init_callback:null,upload_start_callback:null,upload_complete_callback:null,values:[]};return e.setOptions=function(){for(var e=arguments.length,l=new Array(e),n=0;n<e;n++)l[n]=arguments[n];if("function"==typeof Object.assign)return Object.assign.apply(Object,[{},t].concat(l));var i=function(){var e={},n=function n(i){e[i]=t[i],l.forEach(function(t){void 0!==t[i]&&(e[i]=t[i])})};for(var i in t)n(i);return{v:e}}();return"object"===_typeof(i)?i.v:void 0},e}(FileUploader2||{}))||{}))||{});
//# sourceMappingURL=file_uploader-min.js.map