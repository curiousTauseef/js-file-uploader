{"version":3,"sources":["../js/file_uploader.js","../js/_init.js","../js/_create_uploader.js","../js/_add_new_items.js","../js/_create_item.js","../js/_create_info_text.js","../js/_set_options.js","../js/_utility_funcs.js"],"names":["FileUploader2","upl","fupl_selector_data_name","isSuitableBrowser","div","document","createElement","window","init","user_global_options","global_options","setOptions","css","head","insertAdjacentHTML","querySelectorAll","forEach","upl_element","element_all_dataset","dataset","fupl_dataset","fupl_options","JSON","parse","element","url","Error","filetype","toLowerCase","Object","keys","mimetypes","indexOf","e","console","error","json_params","i","item","concat","log","createUploader","alert","unsuitableBrowserMessage","_input","querySelector","original_label","accept_attr","accept_params","accept","split","map","trim","getAttribute","_toConsumableArray","Set","max_filesize","parse_max_filesize","locales","_fupl_options$element","_fupl_options$istance","multiple","Boolean","hasAttribute","required","_type","_mode","uploader_label_text","innerHTML","classList","add","wrapper","parentNode","insertBefore","appendChild","element_class","apply","uploader_add_label","_class","uploader_label_class","push","length","join","templates","main","istance_input","istance_label","istance_dd_text","istance_info_text","istance_result_wrapper","setAttribute","input_text","input_label_class","show_info_text","custom_info_text","create_info_text","values","createItem","hasValues","no_file","addNewItemHandlers","init_callback","debug","groupCollapsed","c_options","c_keys","sort","_toStringify","_typeof","stringify","table","groupEnd","item_data","stampaBytes","bytes","mega","toLocaleString","maximumFractionDigits","Math","round","remove_btn","fupl_file_name","name","fupl_file_size","size_string","wi","he","size","src","fupl_url","href","id","addEventListener","remove","delete_varname","info_text","img_w","img_h","img_min_w","img_min_h","img_max_w","img_max_h","feedback_size","str","info_text_join_string","charAt","toUpperCase","slice","info_text_wrap_string","default_options","alert_api","mes","img","doc","single","element_dragover_class","varname","upload_start_callback","upload_complete_callback","reorder","reorder_varname","_len","arguments","custom_options","Array","_key","assign","_ret","opts","_loop","undefined","v","auto","pdf","filesize_value","maxbytes","unit","isNaN","substr"],"mappings":"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","sourcesContent":["/*!@preserve\n *\n * FileUploader 2.0\n * HTML5 / JS Async Uploader\n * Massimo Cassandro 2017-2019\n *\n */\n\n/* eslint no-console: 0, no-unused-vars: 0, no-empty:  0 */\n/* exported FileUploader2 */\n\n/*\n@codekit-append '_utility_funcs.js'\n@codekit-append '_set_options.js'\n@codekit-append '_create_info_text.js'\n@codekit-append '_create_item.js'\n@codekit-append '_add_new_items.js'\n@codekit-append '_create_uploader.js'\n\n@codekit-append '_init.js'\n\n*/\n\nvar FileUploader2 = (() => {\n  \"use strict\";\n  let upl = {};\n\n  return upl;\n})();\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  // VARIABILI E METODI PRIVATI\n  // nome dell'attributo data da usare come selettore degli elementi su cui applicare FileUploader.\n  const fupl_selector_data_name = 'file_uploader2',\n\n  /*\n    isSuitableBrowser\n    Verifica che il browser sia in grado di gestire le funzionalità richieste.\n    Restituisce `true` o `false`\n  */\n  isSuitableBrowser = () => {\n    var div = document.createElement( 'div' );\n    return ( ( 'draggable' in div ) || ( 'ondragstart' in div && 'ondrop' in div ) )\n      && 'FormData' in window\n      && 'FileReader' in window;\n  };\n\n\n  /*\n    init\n    Seleziona gli elementi con l'attributo `fupl_selector` e avvia FileUploader\n    `user_global_options` è l'oggetto istanziato al momento di avviare FileUploader2,\n    ha la stessa struttura di `default_options` (definito in _set_options.js)\n    e può sovrascrivere ogni suo elemento\n  */\n  upl.init = (user_global_options) => {\n\n    const global_options = upl.setOptions(user_global_options);\n\n    // verifica che il browser sia compatibile\n    if( !isSuitableBrowser() ) {\n      alert(global_options.unsuitableBrowserMessage);\n      return;\n    }\n\n    // caricamento CSS\n    if(global_options.css) {\n      document.head.insertAdjacentHTML('beforeend',\n        '<link rel=\"stylesheet\" href=\"' + global_options.css + '\" type=\"text/css\" media=\"all\">'\n      );\n    }\n\n    // istanze uploader\n    document.querySelectorAll('[data-' + fupl_selector_data_name + ']').forEach( upl_element => {\n\n      /*\n        merge dei parametri inseriti tramite attributi `data`, in cui:\n\n        * `upl_element.dataset`:\n            tutti gli attributi inseriti singolarmente (es. data-filetype=\"img\")\n\n        * `upl_element.dataset[fupl_selector_data_name]`:\n            attributi inseriti tramite json assegnato a `data- + 'fupl_selector_data_name'`\n            (es data-file_uploader2='{\"filetype\":\"img\"}')\n\n        In caso di conflitto prevalgono gli ultimi\n      */\n\n      let element_all_dataset = upl_element.dataset,\n      fupl_dataset = upl_element.dataset[fupl_selector_data_name],\n      fupl_options = {};\n\n      if(element_all_dataset === '') {\n        element_all_dataset = {};\n      }\n\n      if(fupl_dataset === '') {\n        fupl_dataset = {};\n      } else {\n        fupl_dataset = JSON.parse(fupl_dataset);\n      }\n\n      fupl_options = upl.setOptions(\n        global_options,\n        fupl_dataset,\n        element_all_dataset\n      );\n\n      // cancella la chiave `fupl_selector_data_name`\n      // (al solo scopo di ridurre la confusione)\n      delete fupl_options[fupl_selector_data_name];\n\n      // aggiunta dell'elemento stesso ad  `fupl_options`:\n      fupl_options.element = upl_element;\n\n      // controllo parametri e avvio uploader\n      try {\n        //  controllo url\n        if( !fupl_options.url ) {\n          throw new Error( \"Parametro `url` non impostato\" );\n        }\n\n        //  controllo parametro filetype\n        fupl_options.filetype = fupl_options.filetype.toLowerCase();\n        if( Object.keys(upl.mimetypes).indexOf(fupl_options.filetype) === -1 ) {\n          throw new Error( \"Parametro `filetype` non corretto\" );\n        }\n      } catch(e) {\n        console.error( e );// eslint-disable-line\n      }\n\n      // parametri che devono essere array e che potrebbero essere presenti\n      // come attributi data (stringa)\n      const json_params = [\n        'input_text',\n        'templates',\n        'info_text_wrap_string',\n        'values'\n      ];\n      json_params.forEach(item => {\n        try {\n          if(typeof fupl_options[item] === 'string' ) {\n            fupl_options[item] = JSON.parse(fupl_options[item]);\n          }\n        } catch(e) {\n          console.error(`L'elemento “${item}” non è un json valido`); // eslint-disable-line\n          console.log(fupl_options.element); // eslint-disable-line\n          console.error( e );// eslint-disable-line\n        }\n      });\n\n      // interpretazione automatica di tutti i parametri booleani o null\n      for(let i in fupl_options) {\n        if(typeof fupl_options[i] === 'string' &&\n          ['true', 'false', 'null'].indexOf(fupl_options[i].toLowerCase) !== -1) {\n          fupl_options[i] = JSON.parse(fupl_options[i]);\n        }\n      }\n\n\n      new upl.createUploader(fupl_options);\n\n     }); // end document.querySelectorAll(fupl_selector).forEach\n  }; // end upl.init\n\n  return upl;\n\n})(FileUploader2 || {});\n\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  upl.createUploader = (fupl_options) => {\n\n    // eventuale campo input e relativo tag label\n    let _input = fupl_options.element.querySelector('input[type=\"file\"]'),\n      original_label = fupl_options.element.querySelector('label');\n\n\n    // implementazione eventuali parametro/attributo `accept`\n    if( fupl_options.filetype === 'auto' ) {\n\n      let accept_attr = [],\n      accept_params = [];\n\n      if( fupl_options.accept !== null ) {\n        accept_params = fupl_options.accept\n          .split(',').map( item => item.trim() );\n      }\n\n      if(_input && _input.getAttribute('accept') ) {\n        accept_attr = _input.getAttribute('accept')\n          .split(',').map( item => item.trim() );\n      }\n\n      // https://www.peterbe.com/plog/merge-two-arrays-without-duplicates-in-javascript\n      fupl_options.accept = [...new Set([...accept_params, ...accept_attr])];\n\n    } else {\n      fupl_options.accept = upl.mimetypes[fupl_options.filetype];\n    }\n\n    // elaborazione max_filesize\n    let max_filesize = upl.parse_max_filesize(fupl_options.max_filesize, fupl_options.locales);\n    if( max_filesize === false ) {\n      throw new Error( '\"' + fupl_options.max_filesize + '\" non è un valore corretto per `max_filesize`');\n    } else {\n      fupl_options.max_filesize = max_filesize;\n    }\n\n    // parametro o attributo multiple\n    fupl_options.multiple = Boolean(fupl_options.multiple ||\n      (_input && _input.hasAttribute('multiple') ));\n\n    // parametro o attributo required\n    fupl_options.required = Boolean(fupl_options.required ||\n      (_input && _input.hasAttribute('required') ));\n\n\n    // tipologia generale dell'uploader (img o doc) e modalità\n    // selezione file\n    fupl_options._type = fupl_options.filetype === 'img'? 'img' : 'doc';\n    fupl_options._mode = fupl_options.multiple? 'multiple' : 'single';\n\n    // testo label (da tag o parametro uploader_label_text)\n    if( !fupl_options.uploader_label_text && original_label) {\n      fupl_options.uploader_label_text = original_label.innerHTML;\n    }\n    // caso in cui sia presente nessun valore\n    if ( !fupl_options.uploader_label_text ) {\n      fupl_options.uploader_label_text = '__label non presente__';\n    }\n\n    // aggiunta della classe principale\n    fupl_options.element.classList.add(\"fupl\");\n\n    // aggiunta wrapper\n    fupl_options.wrapper = document.createElement('div');\n    fupl_options.element.parentNode.insertBefore(fupl_options.wrapper, fupl_options.element);\n    fupl_options.wrapper.appendChild(fupl_options.element);\n    fupl_options.wrapper.classList.add(\"fupl-wrapper\");\n    fupl_options.wrapper.classList.add(\"fupl-type-\" + fupl_options._type );\n    if(fupl_options.multiple) {\n      fupl_options.wrapper.classList.add(\"fupl-multiple\");\n    }\n    // aggiunta eventuali class' personale\n    if( fupl_options.element_class ) {\n      fupl_options.element.classList.add( ...fupl_options.element_class.split(' ') );\n    }\n\n    // aggiunta label uploader\n    if( fupl_options.uploader_add_label ) {\n      let _class = ['fupl-label'];\n      if( fupl_options.uploader_label_class ) {\n        _class.push(fupl_options.uploader_label_class);\n      }\n      if( fupl_options.required ) {\n        _class.push('required');\n      }\n      fupl_options.element.insertAdjacentHTML('beforebegin',\n        '<div class=\"fupl-label\">' +\n          '<label' + (_class.length? ' class=\"' + _class.join(' ') + '\"' : '') + '>' +\n            fupl_options.uploader_label_text +\n          '</label>' +\n        '</div>'\n      );\n      fupl_options.wrapper.classList.add( 'fupl-has-label' );\n    }\n\n    // aggiunta template uploader\n    fupl_options.element.innerHTML = fupl_options.templates.main;\n\n    fupl_options.istance_input = fupl_options.element.querySelector('.fupl-panel input[type=\"file\"]');\n    fupl_options.istance_label = fupl_options.element.querySelector('.fupl-panel label');\n    fupl_options.istance_dd_text = fupl_options.element.querySelector('.fupl-panel .fupl-dd-text');\n    fupl_options.istance_info_text = fupl_options.element.querySelector('.fupl-panel .fupl-info-text');\n    fupl_options.istance_result_wrapper = fupl_options.element.querySelector('.fupl-result');\n\n\n    // inserimento testi e attributi\n    // if( fupl_options.required ) {\n    //   fupl_options.istance_input.setAttribute('required', '');\n    // }\n    if( fupl_options.multiple ) {\n      fupl_options.istance_input.setAttribute('multiple', '');\n    }\n    if( fupl_options.accept !== null ) {\n      fupl_options.istance_input.setAttribute('accept', fupl_options.accept.join(','));\n    }\n\n    // aggiunta attributo data al wrapper per segnalare il required\n    if( fupl_options.required ) {\n      fupl_options.wrapper.dataset.required = 'true';\n    }\n\n    fupl_options.istance_label.insertAdjacentHTML('beforeend',\n      fupl_options.input_text[fupl_options._type][fupl_options._mode][0]\n    );\n    if(fupl_options.input_label_class) {\n      fupl_options.istance_label.classList.add(...fupl_options.input_label_class.split(' '));\n    }\n    fupl_options.istance_dd_text.innerHTML = fupl_options.input_text[fupl_options._type][fupl_options._mode][1];\n\n    // info text\n    fupl_options.istance_info_text.innerHTML = 'xxx';\n    if( fupl_options.show_info_text ) {\n      if(fupl_options.custom_info_text) {\n        fupl_options.istance_info_text.innerHTML = fupl_options.custom_info_text;\n      } else {\n        fupl_options.istance_info_text.innerHTML = upl.create_info_text(fupl_options);\n      }\n    }\n\n    // aggiunta valori\n    if( !fupl_options.values || !fupl_options.values.length ) {\n      fupl_options.istance_result_wrapper.innerHTML = fupl_options.templates.no_file[fupl_options._type];\n\n    } else {\n      fupl_options.values.forEach( item => {\n        upl.createItem(item, fupl_options);\n      });\n\n      // aggiunta attributo data per segnalare che sono presenti valori\n      fupl_options.wrapper.dataset.hasValues = 'true';\n    }\n\n    // gestione aggiunta nuovi elementi\n    upl.addNewItemHandlers(fupl_options);\n\n\n    // esecuzione init_callback, se presente\n    if( fupl_options.init_callback !== null ) {\n      fupl_options.init_callback( fupl_options );\n    }\n\n\n    //debug\n    if( fupl_options.debug ) {\n      /* eslint-disable */\n      console.groupCollapsed('FileUploader options');\n      // creazione di un oggetto bidimensinale per\n      // semplificare la rappresentazione in tabella\n      let c_options = {},\n      c_keys = Object.keys(fupl_options);\n      c_keys.sort();\n      c_keys.forEach(item => {\n        let _toStringify = typeof fupl_options[item] === 'object' &&\n        fupl_options[item] !== null &&\n          item !== 'element';\n        c_options[item] = _toStringify ? JSON.stringify(fupl_options[item], null, ' ') : fupl_options[item];\n      });\n      console.table(c_options);\n      console.groupCollapsed('fupl_options');\n        console.log(fupl_options);\n      console.groupEnd();\n      console.groupEnd();\n      /* eslint-enable */\n    } // end if debug\n\n\n  }; // end upl.createUploader\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  upl.addNewItemHandlers = (fupl_options) => {\n\n\n  }; // end upl.createItem\n\n  return upl;\n\n})(FileUploader2 || {});\n\n\n\n\n  // //         // !DRAG&DROP\n  // //         fupl_options.element\n  // //         .on( 'drag dragstart dragend dragover dragenter dragleave drop', function( e ) {\n  // //           e.preventDefault();\n  // //           e.stopPropagation();\n  // //         })\n  // //         .on( 'dragover dragenter', function() {\n  // //           fupl_options.element.addClass( fupl_options.element_dragover_class );\n  // //         })\n  // //         .on( 'dragleave dragend drop', function() {\n  // //           fupl_options.element.removeClass( fupl_options.element_dragover_class );\n  // //         })\n  // //         .on( 'drop', function( e ) {\n  // //           var err = false;\n  // //           if( !fupl_options.is_multiple && e.originalEvent.dataTransfer.files.length > 1 ) {\n\n  // //             fupl_options.alertErrorAPI('Puoi selezionare un solo file!');\n  // //             err = true;\n  // //           }\n\n  // //           if(!err) {\n  // //             upl.sendFiles( e.originalEvent.dataTransfer.files, fupl_options ); // filelist\n  // //           }\n  // //         });\n\n  // // //TODO fumoso, da riscrivere\n  // // //TODO correggere selector, possibilità non abbia id\n  // //         // !selezione tramite input\n  // //         var input_selector = '#' + _input.attr('id');\n  // //         $(document).on('change', input_selector, function () {\n  // //           upl.sendFiles( document.querySelector(input_selector).files, fupl_options ); // filelist\n  // //         });\n\n\n  //       } catch(e) { //throw \"error\"\n  //         console.error( e );// eslint-disable-line\n  //       } // finally {}\n\n  //     }); // end document.querySelectorAll(upl.global_options.selector).forEach\n\n  //   }; // end init\n\n  //   return upl;\n\n  // })(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  upl.createItem = (item_data, fupl_options) => {\n\n    const stampaBytes = bytes => {\n      bytes = +bytes;\n      let mega = 1024*1024;\n      if(bytes >= mega ) {\n        return (bytes/mega).toLocaleString(fupl_options.locales, {maximumFractionDigits: 1}) + '<span class=\"fupl-unit\">MB</span>';\n      } else {\n        return Math.round(bytes/1024).toLocaleString(fupl_options.locales, {maximumFractionDigits: 0}) + '<span class=\"fupl-unit\">KB</span>';\n      }\n    };\n\n    try {\n\n      // verifica se il template è una stringa o no\n      // nel primo caso viene trasformato in oggetto DOM e vengono effettuate\n      // le operazioni comuni a tutti gli elementi\n      // il risultato viene quindi riassegnato all'oggetto `fupl_options`\n      // per poter essere riutilizzato\n      // i template per lementi multipli possono null,\n      // in questo caso si utilizza quello per gli elmenti singoli\n      let item = fupl_options.templates[fupl_options._type][fupl_options._mode];\n      if( item === null && fupl_options._mode === 'multiple' ) {\n        item = fupl_options.templates[fupl_options._type]['single'];\n      }\n\n      if( typeof item === 'string') {\n        let div = document.createElement('div'); // wrapper da rimuovere al momento dell'inserimento\n        div.innerHTML = item.trim();\n        // aggiunta pulsante rimozione\n        div.querySelector('.fupl-remove').innerHTML = fupl_options.templates.remove_btn;\n        item = div;\n        fupl_options.templates[fupl_options._type][fupl_options._mode] = div;\n      }\n\n      /*\n        aggiunta dati specifici dell'elemento:\n\n        elementi interni a .fupl-item:\n          .fupl-file-name\n          .fupl-file-size\n          .fupl-img →  img\n          .fupl-img → a.href\n          .fupl-doc →  a.href\n\n        struttura item_data:\n          [\n            {\n              id    → identificativo univoco del file (può essere anche il percorso sul server)\n              name  → nome del file\n              url   → url per eventuale tag <a> presente nell'elemento (se immagine può essere assente o null)\n              src   → attributo `src` (se immagine) oppure assente o null\n              wi    → larghezza in px (se immagine) oppure assente o null\n              he    → altezza in px (se immagine) oppure assente o null\n              size  → dimensione in bytes\n              [...] → eventuali campi aggiuntivi specifici dell'istanza\n            }\n            [...]\n          ]\n      */\n\n      // nome file\n      let fupl_file_name = item.querySelector('.fupl-file-name');\n      if(fupl_file_name && item_data.name ) {\n        fupl_file_name.innerHTML = item_data.name;\n      }\n\n      // info dimensioni\n      let fupl_file_size = item.querySelector('.fupl-file-size');\n      if(fupl_file_size ) {\n        let size_string = '';\n        if(fupl_options._type === 'img' && item_data.wi && item_data.he) {\n          size_string = item_data.wi + '&times;' + item_data.he + '<span class=\"fupl-unit\">px</span>';\n          if(item_data.size) {\n            size_string += ' &ndash; ';\n          }\n        }\n        if(item_data.size) {\n          size_string += stampaBytes(item_data.size);\n        }\n\n        fupl_file_size.innerHTML = size_string;\n      }\n\n\n      // immagine\n      if( fupl_options._type === 'img' ) {\n        item.querySelector('.fupl-img').src = item_data.src;\n      }\n\n      // url\n      let fupl_url = item.querySelector('.fupl-url');\n      if( fupl_url && item_data.url) {\n        fupl_url.href = item_data.url;\n      }\n\n      // id elemento per eventuale cancellazione\n      if(item_data.id) {\n        item.querySelector('.fupl-item').dataset.id = item_data.id;\n      }\n\n      fupl_options.istance_result_wrapper.insertAdjacentHTML('beforeend',\n        item.innerHTML\n      );\n\n      // aggiunta evento trigger eliminazione elemento\n      item = fupl_options.istance_result_wrapper.querySelector('.fupl-item:last-child');\n      item.querySelector('.fupl-remove-trigger').addEventListener('click', () => {\n        // se l'id non è impostato si tratta di un nuovo elemento,\n        // e non va eseguita la cancellazione sul server\n        let id = item.dataset.id;\n        item.remove();\n        if(id) {\n          fupl_options.wrapper.insertAdjacentHTML('beforeend',\n            `<input type=\"hidden\" name=\"${fupl_options.delete_varname}\" value=\"${id}\">`\n          );\n        }\n\n        // controllo se istance_result_wrapper è vuoto\n        // in caso positivo aggiunta testo `no_file` ed eliminazione\n        // fupl_options.wrapper.dataset.hasValues\n        if( !fupl_options.istance_result_wrapper.querySelectorAll('.fupl-item').length ) {\n          fupl_options.istance_result_wrapper.innerHTML = fupl_options.templates.no_file[fupl_options._type];\n          delete fupl_options.wrapper.dataset.hasValues;\n        }\n\n      });\n\n    } catch(e) {\n      console.error(e); // eslint-disable-line\n    }\n\n  }; // end upl.createItem\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n  \"use strict\";\n\n\n  /**\n\t * create_info_text\n\t * (funzione) Genera la stringa riepilogativa delle limitazioni da rispettare\n\t * per la selezione dei file\n\t *\n   * - Restituisce la stringa informativa\n\t */\n\tupl.create_info_text = fupl_options => {\n    let info_text = [];\n\n    if( fupl_options.filetype === 'img' ) {\n      info_text.push( 'immagini in formato <strong>JPEG</strong>, <strong>PNG</strong>, <strong>GIF</strong> o <strong>WEBP</strong>' );\n\n      if( fupl_options.img_w && fupl_options.img_h ) {\n        info_text.push( 'dimensioni: <strong>' +  fupl_options.img_w + '&times;' + fupl_options.img_h + 'px</strong>');\n\n      } else {\n\n        if(fupl_options.img_w && fupl_options.img_h && fupl_options.img_w === fupl_options.img_h) {\n          info_text.push( 'larghezza e altezza <strong>' +  fupl_options.img_h + 'px</strong>');\n\n        } else if(fupl_options.img_min_w && fupl_options.img_min_h && fupl_options.img_min_w === fupl_options.img_min_h) {\n          info_text.push( 'larghezza e altezza non inferiori a <strong>' +  fupl_options.img_min_w + 'px</strong>');\n\n        } else if(fupl_options.img_max_w && fupl_options.img_max_h && fupl_options.img_max_w === fupl_options.img_max_h) {\n          info_text.push( 'larghezza e altezza non superiori a <strong>' +  fupl_options.img_max_w + 'px</strong>');\n\n        } else {\n\n          if( fupl_options.img_w ) {\n            info_text.push( 'larghezza <strong>' +  fupl_options.img_w + 'px</strong>');\n\n          } else if( fupl_options.img_min_w && fupl_options.img_max_w ) {\n            info_text.push( 'larghezza compresa tra <strong>' +  fupl_options.img_min_w + 'px</strong> e <strong>' + fupl_options.img_max_w + 'px</strong>');\n\n          } else if( fupl_options.img_min_w ) {\n            info_text.push( 'larghezza non inferiore a <strong>' +  fupl_options.img_min_w + 'px</strong>');\n\n          } else if( fupl_options.img_max_w  ) {\n            info_text.push( 'larghezza non superiore a <strong>' +  fupl_options.img_max_w + 'px</strong>');\n          }\n\n          if( fupl_options.img_h ) {\n            info_text.push( 'altezza <strong>' +  fupl_options.img_h + 'px</strong>');\n\n          } else if( fupl_options.img_min_h && fupl_options.img_max_h ) {\n            info_text.push( 'altezza compresa tra <strong>' +  fupl_options.img_min_h + 'px</strong> e <strong>' + fupl_options.img_max_h + 'px</strong>');\n\n          } else if( fupl_options.img_min_h ) {\n            info_text.push( 'altezza non inferiore a <strong>' +  fupl_options.img_min_h + 'px</strong>');\n\n          } else if( fupl_options.img_max_h  ) {\n            info_text.push( 'altezza non superiore a <strong>' +  fupl_options.img_max_h + 'px</strong>');\n          }\n        }\n      }\n\n    } else if( fupl_options.filetype === 'pdf' ) {\n      info_text.push( 'file in formato <strong>PDF</strong>' );\n    }\n\n    if( fupl_options.max_filesize !== null ) {\n      info_text.push( 'max <strong>' + fupl_options.max_filesize.feedback_size + '</strong>' );\n    }\n\n    let str = info_text.join(fupl_options.info_text_join_string);\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n\n    if(fupl_options.info_text_wrap_string && str) {\n      str = fupl_options.info_text_wrap_string[0] + str + fupl_options.info_text_wrap_string[1];\n    }\n    return str;\n\t};\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ( (upl) => {\n  \"use strict\";\n\n  // parametri di default condivisi da tutte le istanze\n  const default_options = {\n\n    // percorso del css FileUploader\n    css: null,\n\n    // Attiva la modalità debug che mostra in console le informazioni\n    // sulla configurazione corrente\n    debug: false,\n\n    // locales string, usata per la formattazione della stringa numerica\n    // mostrata all'utente ricavata da `max_filesize`\n    locales: 'it-IT',\n\n    // messaggio browser non compatibile\n    unsuitableBrowserMessage: 'Il tuo browser non ha tutte le funzionalità richieste da FileUploader',\n\n    // Interfaccia per l'invio di messaggi di errore\n    alert_api: (mes) => { window.alert(mes);},\n\n    // Url dello script lato server che esegue il caricamento del file\n    // per l'istanza in esame. Ha la precedenza sull'impostazione globale\n    // obbligatorio\n    url: null,\n\n    // Tipologia dei file selezionabili\n    // il valore deve corrispondere ad una delle chievi dell'array `mimetypes`\n    filetype: 'auto',\n\n    /*\n    Stringa di estensioni o mimetypes separati da virgola accettabili per l'uploader\n    corrente in aggiunta o sostituzione di quanto impostato tramite il parametro `filetype`.\n\n    L'eventuale attributo `accept` del campo input contenuto\n    nel contenitore uploader (se presente), svolge la stessa funzione.\n\n    In entrambi i casi, i valori sono presi in considerazione solo se `filetype == 'auto'`\n\n    In presenza sia del parametro che dell'attributo `accept`, viene effettuato un merge,\n    e l'attributo ha la precedenza sul parametro.\n    Se il parametro è `null` e l'attributo `accept` non è presente,\n    con `filetype == auto` vengono accettati tutti i tipi di file.\n    */\n    accept: null,\n\n    /*\n    Parametro multiple.\n    Attiva la possibilità di acquisire più file con lo stesso uploader.\n    L'attivazione di questa opzione può essere effettuata anche tramite il parametro\n    del campo `input` /se presente)\n    */\n    multiple: false,\n\n    /*\n    Parametro required.\n    Eventuale impostazione del campo come obbligatorio.\n    L'attivazione di questa opzione può essere effettuata anche tramite il parametro\n    del campo `input` /se presente)\n    */\n    required: false,\n\n    /*\n      Template dei markup utilizzati\n      - `main`         : markup principale inserito dentro l'elemento indicato da\n                         `upl.global_options.selector`. L'elemento, a cui viene inoltre\n                         aggiunta la classe `flup`, viene inoltre racchiuso in un elemento\n                         `div.flup-wrapper`\n\n      - `single_img`   : template aggiuntivo per immagini singole\n      - `multiple_imgs`: template aggiuntivo per immagini multiple\n      - `single_doc`   : template aggiuntivo per documenti singoli\n      - `multiple_docs`: template aggiuntivo per documenti multipli\n      - `no_file`      : template per indicare l'assenza di file\n\n      Consulta il readme per ulteriori dettagli.\n\n      Il markup di default utilizza classi di Boostrap 4.\n\n      L'eventuale contenuto dell'elemento originale viene eliminato (può contenere\n      un elemento type[file] per eventuale procedura di fallback)\n\n      I template possono essere alterati a piacimento, purché si mantengano le classi\n      `fupl-*` utilizzate nella procedura.\n\n      I template delle immagini, devono contenere il tag img\n\n      doc e img multipli possono essere null, in questo caso vengono utilizzati\n      gli stessi markup per singolo file\n    */\n    templates: {\n      // wrapped in <div class=\"fupl-wrapper\"><div class=\"fupl\"></div></div>\n      main: '<div class=\"fupl-result\"></div>' +\n        '<div class=\"fupl-panel\">' +\n          '<div class=\"fupl-button\">' +\n            '<label><input type=\"file\"></label>' +\n            '<div class=\"fupl-dd-text\">{</div>' +\n          '</div>' +\n          '<div class=\"fupl-info-text\"></div>' +\n        '</div>',\n\n      // contenuto di fupl-result quando non sono presenti files\n      no_file: {\n        img: '<div class=\"fupl-result-empty text-muted small font-italic\">Nessuna immagine presente</div>',\n        doc: '<div class=\"fupl-result-empty text-muted small font-italic\">Nessun file presente</div>'\n      },\n\n      // trigger per la rimozione di un elemento da .fupl_results\n      // è aggiunto all'interno dell'elemento `.fupl-remove`, presente in ognuno\n      // degli elementi successivi\n      // Deve essere un elemento button\n      remove_btn: '<button type=\"button\" class=\"close fupl-remove-trigger\" aria-label=\"Elimina\" title=\"Elimina questo file\">' +\n            '<span aria-hidden=\"true\">&times;</span>' +\n          '</button>',\n\n      img: {\n        single: '<div class=\"fupl-item\">' +\n          '<div class=\"fupl-remove\"></div>' +\n          '<img alt=\"Immagine caricata\" class=\"img-fluid fupl-img\">' +\n          '<div class=\"fupl-file-info\">' +\n            '<div class=\"text-truncate fupl-file-name\"></div>' +\n            '<div class=\"fupl-file-size\"></div>' +\n          '</div>' +\n        '</div>',\n\n        multiple: '<div class=\"fupl-item\">' +\n            '<div class=\"fupl-remove\"></div>' +\n            '<div class=\"fupl-img-wrapper\">' +\n              '<img alt=\"Immagine caricata\" class=\"img-fluid fupl-img\">' +\n            '</div>' +\n            '<div class=\"fupl-file-info\">' +\n              '<div class=\"text-truncate fupl-file-name\"></div>' +\n              '<div class=\"fupl-file-size\"></div>' +\n            '</div>' +\n          '</div>'\n      },\n\n      doc : {\n        single: '<div class=\"fupl-item\">' +\n            '<div class=\"fupl-remove\"></div>' +\n            '<div class=\"fupl-doc text-truncate\">' +\n              '<a href=\"#\" class=\"text-truncate fupl-file-name fupl-url\"></a>' +\n            '</div>' +\n            '<span class=\"small ml-1 text-nowrap fupl-file-size\"></span>' +\n          '</div>',\n\n        multiple: null // usa single_doc\n      }\n    },\n\n    // Eventuale classe da aggiungere all'elemento FileUploader al\n    // momento dell'inizializzazione\n    element_class: null,\n\n    // Classe da aggiungere all'elemento FileUploader quando un file\n    // vi è trascinato sopra\n    element_dragover_class: 'fupl-is-dragover',\n\n    // Label da applicare da applicare all'elemento FileUploader.\n    // Se `null` e se esiste un elemento `label` all'interno dell'uploader,\n    // viene preso il testo dell'elemento\n    uploader_label_text: null,\n\n    // Opzione per l'aggiunta di un tag label prima dell'elemento uploader\n    uploader_add_label: true,\n\n    // Eventuale classe da aggiungere ad uploader_label\n    uploader_label_class: null,\n\n    /*\n    Array (o stringa json) dei testi del label del tag input (il primo elemento dell'array) e del testo\n    informativo per il drag &drop da inserire in `.fupl-dd-text` (il secondo elemento)\n    nelle varie combinazioni (img singola e multiple, doc singole e multipli)\n    segnaposti: ['{{input_label}}', '{{dd_text}}']\n    */\n    input_text: {\n      img: {\n        single:   [\"Seleziona un'immagine\", \"\\u2026oppure trascinala qui\"],\n        multiple: [\"Seleziona una o più immagini\", \"\\u2026oppure trascinale qui\"]\n      },\n      doc: {\n        single: [\"Seleziona un documento\", \"\\u2026oppure trascinalo qui\"],\n        multiple: [\"Seleziona uno o più documenti\", \"\\u2026oppure trascinali qui\"]\n      }\n    },\n\n    // classi da applicare al tag label dell'input[file] generato, utilizzato\n    // come pulsante per la selezione dei file\n    input_label_class: 'btn btn-outline-primary btn-sm',\n\n    // indica se mostrare o no il testo informativo su formati accettati,\n    // dimensioni immagini, ecc. Se si decide di non mostrarlo, potrebbe essere\n    // necessario rimuovere dal template l'elemento `.fupl-info-text`\n    show_info_text: true,\n\n    // stringhe aggiunte all'inizio e alla fine del testo informativo generato\n    // utilizzate solo se `custom_info_text` non è impostato\n    info_text_wrap_string: ['(', ')'],\n\n    // Stringa utilizzata per concatenare tra loro le varie parti del testo informativo generato\n    // utilizzata solo se `custom_info_text` non è impostato\n    info_text_join_string: ', ',\n\n    // Eventuale testo informativo personalizzato. se presente,\n    // sostituisce il testo generato in base ai formati, ai limiti di dimensioni, ecc.\n    custom_info_text: null,\n\n    /*\n    impostazioni per le immagini.\n    Applicate solo se filetype == 'img'.\n    Valori numerici che corrispondono alle dimensioni in pixel richieste per l'immagine.\n    I parametri img_min_* e img_max_* possono essere assegnati simultaneamente,\n    ma sono ignorati se esistono i corrispondenti parametri esatti (ad esempio,\n    se è presente img_w, i parametri img_min_w e img_max_w non vengono presi in considerazione).\n    Il valore di default di tutti i parametri è null, che significa che non vengono applicati.\n\n      * `img_min_w`: larghezza minima dell'immagine\n      * `img_max_w`: larghezza massima dell'immagine\n      * `img_w`: larghezza esatta dell'immagine\n      * `img_min_h`: altezza minima dell'immagine\n      * `img_max_h`: altezza massima dell'immagine\n      * `img_h`: altezza esatta dell'immagine\n    */\n    img_min_w   : null,\n    img_max_w   : null,\n    img_w       : null,\n    img_min_h   : null,\n    img_max_h   : null,\n    img_h       : null,\n\n    /*\n    Dimensione (peso) massima dell'immagine. Può essere un numero,\n    e in questo caso corrisponde ad una dimensione in KB, o una stringa\n    composta da un valore numerico e da un suffisso tra ‘KB’ e ‘MB’ (anche minuscoli).\n    Se il valore è null o se la stringa non viene riconosciuta,\n    non è applicato nessun limite.\n    */\n    max_filesize: null,\n\n    // Prefisso della variabile utilizzata per inviare al server i dati\n    // di ogni singolo file caricato. Il valore indicato è il nome base dell'array\n    // costruito per inviare i valori al server.\n    varname: 'file',\n\n    // Funzione richiamata dopo l'inizializzazione di ogni elemento FileUploader.\n    // La funzione viene invocata con l'oggetto di tutte le opzioni come argomento\n    init_callback: null,\n\n    /*\n    Funzione richiamata ogni volta che un file viene inviato al server.\n    La funzione viene invocata passandole un oggetto contenente:\n      * `item_id`: id univoco del documento in elaborazione\n      * `filelist_item`: oggetto filelist corrente,\n      * `img_preview` : miniatura dell'immagine in forma di stringa Base64\n        (null se si tratta di altre tipologie)\n      * `uploader_options`: oggetto `options` corrente\n      * `img_wi` e `img_he`: dimensioni in pixel dell'immagine.\n        null se non si tratta di immagini\n    */\n    upload_start_callback: null,\n\n    /*\n    Funzione richiamata ogni volta che un file viene caricato.\n    La funzione viene invocata passandole un oggetto contenente:\n      * `item_id`: id univoco del documento in elaborazione,\n      * `server_error`: null, se l'upload è stato completato correttamente oppure,\n        in caso contrario, stringa con il messaggio di errore restituito\n      * `filelist_item`: oggetto filelist corrente,\n      * `hidden_fields`: stringa con i campi hidden da inviare al server\n      * `uploader_options`: oggetto `options` corrente\n      * `img_wi` e img_he: dimensioni in pixel dell'immagine.\n        null se non si tratta di immagini\n    */\n    upload_complete_callback: null,\n\n    /*\n    Array json degli eventuali elementi preregistrati, nella forma:\n      [\n        {\n          id    → identificativo univoco del file (può essere anche il percorso sul server) OBBL\n          name  → nome del file\n          url   → url per eventuale tag <a> presente nell'elemento (se immagine può essere assente o null)\n          src   → attributo `src` obbligatorio se immagine, oppure assente o null\n          wi    → larghezza in px se immagine oppure assente o null\n          he    → altezza in px se immagine oppure assente o null\n          size  → dimensione in bytes\n          [...] → eventuali campi aggiuntivi specifici dell'istanza\n        }\n        [...]\n      ]\n\n      l'id viene aggiunto come attributo `data` al pulsante di eliminazione del file\n      (genera un hidden con l'id del file da eliminare dal server)\n    */\n    values: [],\n\n    // varname degli hidden con gli id dei file già registrati  da eliminare\n    delete_varname: 'elimina_file[]',\n\n// TODO\n    // attiva la possibilità di riordinare gli elementi trascinandoli\n    // se true, i valori degli eventuali elementi preregistrati devono essere\n    // elencati nel josn `values` nell'ordine correttp\n    reorder: false,\n\n    // name della variabile hidden usata per registrare l'ordinamento\n    reorder_varname: 'order'\n\n// TODO gestione campi aggiuntivi\n  };\n\n  upl.setOptions = (...custom_options) => {\n\n    if( typeof Object.assign === \"function\") {\n      return Object.assign(\n        {},\n        default_options,\n        ...custom_options\n      );\n\n    } else { // IE 11\n      let opts = {};\n      for(let i in default_options) {\n        opts[i] = default_options[i];\n        custom_options.forEach( item => {\n          if(item[i] !== undefined) {\n            opts[i] = item[i];\n          }\n        });\n      }\n      return opts;\n    }\n  };\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  // mimetypes ed estensioni accettabili in base al parametro `filetype`.\n  // Il parametro `auto` accetta tutti i tipi di file (salvo eventuali limitazioni\n  // aggiunte tramite parametro e attributo `accept`)\n  upl.mimetypes = {\n    auto : null,\n    img  : ['image/png', 'image/jpeg', 'image/pjpeg', 'image/gif', 'image/webp',\n            '.png', '.jpg', '.jpeg', '.pjpg', '.pjpeg', '.gif', '.webp'],\n    pdf  : ['application/pdf', '.pdf']\n  };\n\n\n  /*\n   parse_max_filesize\n   elabora il parametro `filesize_value` (se esiste) e restituisce:\n    - `null` se `filesize_value` === null`\n    - `false` se `filesize_value` non è un valore corretto\n    - l'oggetto `{ maxbytes: 123456, unit: 'KB', feedback_size: ''}`\n    in cui:\n      - `maxbytes` è il valore in bytes del limite imposto\n      - `unit` è uno tra 'KB' e 'MB'\n      - `feedback_size` è la rappresentazione per un eventuale feedback per l'utente\n  */\n  upl.parse_max_filesize = (filesize_value, locales) =>  {\n    // controllo max_filesize ed elaborazione parametro\n    if( filesize_value ) {\n      var maxbytes, unit, feedback_size;\n\n      if(!isNaN(filesize_value)) { //solo numero, si assume siano KB\n        maxbytes = +filesize_value;\n        unit = 'KB';\n        feedback_size = maxbytes;\n\n      } else {\n\n        unit = filesize_value.substr(-2, 2).toUpperCase();\n        maxbytes = +filesize_value.substr(0, filesize_value.length-2);\n        feedback_size = maxbytes;\n\n        if(isNaN(maxbytes) || (unit !== 'KB' && unit !== 'MB') ) {\n          return false;\n        }\n      }\n\n      // se l'unità è indicata in KB ma il valore è più grande\n      // di un MB, il parametro viene aggiornato\n      if( maxbytes >= 1024 && unit === 'KB') {\n        unit = 'MB';\n        feedback_size = (Math.round((maxbytes / 1024) * 100) /100);\n      }\n\n      if(unit === 'KB') {\n        maxbytes = maxbytes * 1024;\n      } else {\n        maxbytes = maxbytes * 1024 * 1024;\n      }\n\n      return {\n        //'original_value': filesize_value,\n        //'unit'         : unit,\n        'maxbytes'     : maxbytes,\n        'feedback_size': feedback_size.toLocaleString(\n          locales, {maximumFractionDigits: (unit === 'KB'? 0 : 1)}\n        ) + '<span class=\"fupl-unit\">' + unit + '</span>'\n      };\n\n    } else {\n      return null;\n    }\n  };\n\n  return upl;\n\n})(FileUploader2 || {});\n"]}