{"version":3,"sources":["../js/file_uploader.js","../js/_init.js","../js/_create_uploader.js","../js/_create_item.js","../js/_set_listeners.js","../js/_send_files.js","../js/_build_hidden_fields.js","../js/_create_info_text.js","../js/_set_options.js","../js/_funcs_and_params.js"],"names":["FileUploader2","upl","navigator","userAgent","indexOf","appVersion","alert","browser_is_not_compatible","isSuitableBrowser","div","document","createElement","window","init","user_global_options","global_options","setOptions","unsuitableBrowserMessage","css","head","insertAdjacentHTML","querySelectorAll","data_attributes","fupl_selector","forEach","upl_element","element_all_dataset","dataset","fupl_dataset","fupl_options","JSON","parse","element","uploader_url","Error","filetype","toLowerCase","Object","keys","mimetypes","e","console","error","json_params","i","item","concat","log","createUploader","_input","querySelector","original_label","accept_attr","accept_params","accept","split","map","trim","getAttribute","_toConsumableArray","Set","max_filesize","parse_max_filesize","locales","_fupl_options$element","_fupl_options$istance","multiple","Boolean","hasAttribute","required","_type","_mode","uploader_label_text","innerHTML","classList","add","wrapper","parentNode","insertBefore","appendChild","element_class","apply","uploader_add_label","_class","uploader_label_class","push","length","join","templates","main","istance_input","istance_label","istance_dd_text","istance_info_text","istance_result_wrapper","setAttribute","input_text","input_label_class","show_info_text","custom_info_text","create_info_text","values","createItem","hasValues","no_file","setListeners","init_callback","debug","groupCollapsed","c_options","c_keys","sort","_toStringify","_typeof","stringify","table","groupEnd","item_data","item_markup","fupl_item_wrapper","remove_btn","fupl_file_name","name","fupl_file_size","size_string","wi","he","size","parse_filesize","src","fupl_url","url","href","fupl_item","id","item_id","loading","loading_markup","addEventListener","remove","delete_varname","eventName","preventDefault","stopPropagation","element_dragover_class","files","dataTransfer","alert_api","alert_messages","tooMuchFiles","sendFiles","filelist","disable_submit","modo","_form","closest","submit_btns","btn","disabled","submitHandler","removeEventListener","uploadFile","current_item","img_preview","this_item","file","width","height","xhr_error_message","xhrError","replace","remove_item_on_error","click","upload_start_callback","uploader_options","Promise","resolve","reject","ajax","XMLHttpRequest","open","onload","status","response","responseText","tmp_file","upload_complete_callback","server_error","statusText","onerror","onprogress","perc_loaded","Math","round","loaded","total","Infinity","value","fileData","FormData","append","send","then","buildHiddenFields","upload_promises","filelist_item","idx","Date","ext","pop","type","fileFormatError","maxbytes","item_parsed_size","fileSizeError","feedback_size","reader","FileReader","image","Image","result","err_mes","img_w","img_exact_width_err","img_min_w","img_min_width_err","img_max_w","img_max_width_err","img_h","img_exact_height_err","img_min_h","img_min_height_err","img_max_h","img_max_height_err","img_err_start_string","readAsDataURL","errormessage","normalize_file_name","filename","converted","conversionTable","à","è","é","ì","ò","ù","À","È","É","Ì","Ò","Ù","'","|","!","\"","$","%","&","/","(",")","=","?","^","*","[","]","ç","@","#","<",">","ü","Ü","ñ","Ñ","~",":","\\","charCodeAt","charAt","hidden_fields","field_values","file_name","_key","varname","info_text","str","info_text_join_string","toUpperCase","slice","info_text_wrap_string","default_options","IE_alert","mes","opts","arguments","undefined","img","doc","single","reorder","reorder_varname","_len","custom_options","Array","assign","_ret","_loop","v","auto","pdf","bytes","mega","toLocaleString","maximumFractionDigits","filesize_value","unit","isNaN","substr"],"mappings":"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","sourcesContent":["/*!@preserve\n *\n * FileUploader 2.0\n * HTML5 / JS Async Uploader\n * Massimo Cassandro 2017-2019\n *\n */\n\n/* eslint no-console: 0, no-unused-vars: 0, no-empty:  0 */\n/* exported FileUploader2 */\n\n/*\n@codekit-append '_funcs_and_params.js'\n@codekit-append '_set_options.js'\n@codekit-append '_create_info_text.js'\n@codekit-append '_reorder.js'\n@codekit-append '_build_hidden_fields.js'\n@codekit-append '_send_files.js'\n@codekit-append '_set_listeners.js'\n@codekit-append '_create_item.js'\n@codekit-append '_create_uploader.js'\n\n@codekit-append '_init.js'\n\n*/\n\"use strict\";\nvar FileUploader2 = (function () {\n\n  let upl = {};\n\n  // Eliminazione IE 11\n  if( navigator.userAgent.indexOf('MSIE') !== -1 ||\n      navigator.appVersion.indexOf('Trident/') > -1 ||\n      navigator.userAgent.indexOf('Trident/') > -1 ){\n\n    alert(\"Stai utilizzando un browser non compatibile con questa applicazione.\\n\" +\n      \"Utilizza la versione più recente di Firefox, Edge, Safari, Opera o Chrome\");\n\n    upl.browser_is_not_compatible = true;\n  }\n\n\n  return upl;\n})();\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  // VARIABILI E METODI PRIVATI\n  /*\n    isSuitableBrowser\n    Verifica che il browser sia in grado di gestire le funzionalità richieste.\n    Restituisce `true` o `false`\n  */\n  const isSuitableBrowser = () => {\n    var div = document.createElement( 'div' );\n    return ( ( 'draggable' in div ) || ( 'ondragstart' in div && 'ondrop' in div ) )\n      && 'FormData' in window\n      && 'FileReader' in window\n      && 'fetch' in window;\n  };\n\n\n  /*\n    init\n    Seleziona gli elementi con l'attributo `fupl_selector` e avvia FileUploader\n    `user_global_options` è l'oggetto istanziato al momento di avviare FileUploader2,\n    ha la stessa struttura di `default_options` (definito in _set_options.js)\n    e può sovrascrivere ogni suo elemento\n  */\n  upl.init = (user_global_options) => {\n\n    if(!upl.browser_is_not_compatible) {\n      const global_options = upl.setOptions(user_global_options);\n\n      // verifica che il browser sia compatibile\n      if( !isSuitableBrowser() ) {\n        alert(global_options.unsuitableBrowserMessage);\n        return;\n      }\n\n      // caricamento CSS\n      if(global_options.css) {\n        document.head.insertAdjacentHTML('beforeend',\n          '<link rel=\"stylesheet\" href=\"' + global_options.css + '\" type=\"text/css\" media=\"all\">'\n        );\n      }\n\n      // istanze uploader\n      //---------------------------------------------------\n      document.querySelectorAll('[data-' + upl.data_attributes.fupl_selector + ']').forEach( upl_element => {\n        /*\n          merge dei parametri inseriti tramite attributi `data`, in cui:\n\n          * `upl_element.dataset`:\n              tutti gli attributi inseriti singolarmente (es. data-filetype=\"img\")\n\n          * `upl_element.dataset[upl.data_attributes.fupl_selector]`:\n              attributi inseriti tramite json assegnato a `data- + 'upl.data_attributes.fupl_selector'`\n              (es data-file_uploader2='{\"filetype\":\"img\"}')\n\n          In caso di conflitto prevalgono gli ultimi\n        */\n\n        let element_all_dataset = upl_element.dataset,\n        fupl_dataset = upl_element.dataset[upl.data_attributes.fupl_selector],\n        fupl_options = {};\n\n        if(element_all_dataset === '') {\n          element_all_dataset = {};\n        }\n\n        if(fupl_dataset === '') {\n          fupl_dataset = {};\n        } else {\n          fupl_dataset = JSON.parse(fupl_dataset);\n        }\n\n        fupl_options = upl.setOptions(\n          global_options,\n          fupl_dataset,\n          element_all_dataset\n        );\n\n        // cancella la chiave `upl.data_attributes.fupl_selector`\n        // (al solo scopo di ridurre la confusione)\n        delete fupl_options[upl.data_attributes.fupl_selector];\n\n        // aggiunta dell'elemento stesso ad  `fupl_options`:\n        fupl_options.element = upl_element;\n\n        // controllo parametri e avvio uploader\n        try {\n          //  controllo url\n          if( !fupl_options.uploader_url ) {\n            throw new Error( \"Parametro `uploader_url` non impostato\" );\n          }\n\n          //  controllo parametro filetype\n          fupl_options.filetype = fupl_options.filetype.toLowerCase();\n          if( Object.keys(upl.mimetypes).indexOf(fupl_options.filetype) === -1 ) {\n            throw new Error( \"Parametro `filetype` non corretto\" );\n          }\n        } catch(e) {\n          console.error( e );// eslint-disable-line\n        }\n\n        // parametri che devono essere array e che potrebbero essere presenti\n        // come attributi data (stringa)\n        const json_params = [\n          'input_text',\n          'templates',\n          'info_text_wrap_string',\n          'values'\n        ];\n        json_params.forEach(item => {\n          try {\n            if(typeof fupl_options[item] === 'string' ) {\n              fupl_options[item] = JSON.parse(fupl_options[item]);\n            }\n          } catch(e) {\n            console.error(`L'elemento “${item}” non è un json valido`); // eslint-disable-line\n            console.log(fupl_options.element); // eslint-disable-line\n            console.error( e );// eslint-disable-line\n          }\n        });\n\n        // interpretazione automatica di tutti i parametri booleani o null\n        for(let i in fupl_options) {\n          if(typeof fupl_options[i] === 'string' &&\n            ['true', 'false', 'null'].indexOf(fupl_options[i].toLowerCase) !== -1) {\n            fupl_options[i] = JSON.parse(fupl_options[i]);\n          }\n        }\n\n\n        new upl.createUploader(fupl_options);\n\n      }); // end document.querySelectorAll(fupl_selector).forEach\n    } // end !upl.browser_is_not_compatible\n  }; // end upl.init\n\n  return upl;\n\n})(FileUploader2 || {});\n\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  upl.createUploader = (fupl_options) => {\n\n    // eventuale campo input e relativo tag label\n    let _input = fupl_options.element.querySelector('input[type=\"file\"]'),\n      original_label = fupl_options.element.querySelector('label');\n\n\n    // implementazione eventuali parametro/attributo `accept`\n    if( fupl_options.filetype === 'auto' ) {\n\n      let accept_attr = [],\n      accept_params = [];\n\n      if( fupl_options.accept !== null ) {\n        accept_params = fupl_options.accept\n          .split(',').map( item => item.trim() );\n      }\n\n      if(_input && _input.getAttribute('accept') ) {\n        accept_attr = _input.getAttribute('accept')\n          .split(',').map( item => item.trim() );\n      }\n\n      // https://www.peterbe.com/plog/merge-two-arrays-without-duplicates-in-javascript\n      fupl_options.accept = [...new Set([...accept_params, ...accept_attr])];\n\n    } else {\n      fupl_options.accept = upl.mimetypes[fupl_options.filetype];\n    }\n\n    // elaborazione max_filesize\n    let max_filesize = upl.parse_max_filesize(fupl_options.max_filesize, fupl_options.locales);\n    if( max_filesize === false ) {\n      throw new Error( '\"' + fupl_options.max_filesize + '\" non è un valore corretto per `max_filesize`');\n    } else {\n      fupl_options.max_filesize = max_filesize;\n    }\n\n    // parametro o attributo multiple\n    fupl_options.multiple = Boolean(fupl_options.multiple ||\n      (_input && _input.hasAttribute('multiple') ));\n\n    // parametro o attributo required\n    fupl_options.required = Boolean(fupl_options.required ||\n      (_input && _input.hasAttribute('required') ));\n\n\n    // tipologia generale dell'uploader (img o doc) e modalità\n    // selezione file\n    fupl_options._type = fupl_options.filetype === 'img'? 'img' : 'doc';\n    fupl_options._mode = fupl_options.multiple? 'multiple' : 'single';\n\n    // testo label (da tag o parametro uploader_label_text)\n    if( !fupl_options.uploader_label_text && original_label) {\n      fupl_options.uploader_label_text = original_label.innerHTML;\n    }\n    // caso in cui sia presente nessun valore\n    if ( !fupl_options.uploader_label_text ) {\n      fupl_options.uploader_label_text = '__label non presente__';\n    }\n\n    // aggiunta della classe principale\n    fupl_options.element.classList.add(\"fupl\");\n\n    // aggiunta wrapper\n    fupl_options.wrapper = document.createElement('div');\n    fupl_options.element.parentNode.insertBefore(fupl_options.wrapper, fupl_options.element);\n    fupl_options.wrapper.appendChild(fupl_options.element);\n    fupl_options.wrapper.classList.add(\"fupl-wrapper\");\n    fupl_options.wrapper.classList.add(\"fupl-type-\" + fupl_options._type );\n    if(fupl_options.multiple) {\n      fupl_options.wrapper.classList.add(\"fupl-multiple\");\n    }\n    // aggiunta eventuali class' personale\n    if( fupl_options.element_class ) {\n      fupl_options.element.classList.add( ...fupl_options.element_class.split(' ') );\n    }\n\n    // aggiunta label uploader\n    if( fupl_options.uploader_add_label ) {\n      let _class = ['fupl-label'];\n      if( fupl_options.uploader_label_class ) {\n        _class.push(fupl_options.uploader_label_class);\n      }\n      if( fupl_options.required ) {\n        _class.push('required');\n      }\n      fupl_options.element.insertAdjacentHTML('beforebegin',\n        '<div class=\"fupl-label\">' +\n          '<label' + (_class.length? ' class=\"' + _class.join(' ') + '\"' : '') + '>' +\n            fupl_options.uploader_label_text +\n          '</label>' +\n        '</div>'\n      );\n      fupl_options.wrapper.classList.add( 'fupl-has-label' );\n    }\n\n    // aggiunta template uploader\n    fupl_options.element.innerHTML = fupl_options.templates.main;\n\n    fupl_options.istance_input = fupl_options.element.querySelector('.fupl-panel input[type=\"file\"]');\n    fupl_options.istance_label = fupl_options.element.querySelector('.fupl-panel label');\n    fupl_options.istance_dd_text = fupl_options.element.querySelector('.fupl-panel .fupl-dd-text');\n    fupl_options.istance_info_text = fupl_options.element.querySelector('.fupl-panel .fupl-info-text');\n    fupl_options.istance_result_wrapper = fupl_options.element.querySelector('.fupl-result');\n\n\n    // inserimento testi e attributi\n    // if( fupl_options.required ) {\n    //   fupl_options.istance_input.setAttribute('required', '');\n    // }\n    if( fupl_options.multiple ) {\n      fupl_options.istance_input.setAttribute('multiple', '');\n    }\n    if( fupl_options.accept !== null ) {\n      fupl_options.istance_input.setAttribute('accept', fupl_options.accept.join(','));\n    }\n\n    // aggiunta attributo data al wrapper per segnalare il required\n    if( fupl_options.required ) {\n      fupl_options.wrapper.dataset[upl.data_attributes.required] = 'true';\n    }\n\n    fupl_options.istance_label.insertAdjacentHTML('beforeend',\n      fupl_options.input_text[fupl_options._type][fupl_options._mode][0]\n    );\n    if(fupl_options.input_label_class) {\n      fupl_options.istance_label.classList.add(...fupl_options.input_label_class.split(' '));\n    }\n    fupl_options.istance_dd_text.innerHTML = fupl_options.input_text[fupl_options._type][fupl_options._mode][1];\n\n    // info text\n    if( fupl_options.show_info_text ) {\n      if(fupl_options.custom_info_text) {\n        fupl_options.istance_info_text.innerHTML = fupl_options.custom_info_text;\n      } else {\n        fupl_options.istance_info_text.innerHTML = upl.create_info_text(fupl_options);\n      }\n    }\n\n    // aggiunta valori\n    if( !fupl_options.values || !fupl_options.values.length ) {\n      fupl_options.istance_result_wrapper.innerHTML = fupl_options.templates.no_file[fupl_options._type];\n      fupl_options.wrapper.dataset[upl.data_attributes.hasValues] = 'false';\n\n    } else {\n      fupl_options.values.forEach( item => {\n        upl.createItem(item, fupl_options);\n      });\n\n      // aggiunta attributo data per segnalare che sono presenti valori\n      fupl_options.wrapper.dataset[upl.data_attributes.hasValues] = 'true';\n    }\n\n    // gestione aggiunta nuovi elementi\n    upl.setListeners(fupl_options);\n\n\n    // esecuzione init_callback, se presente\n    if( fupl_options.init_callback !== null ) {\n      fupl_options.init_callback( fupl_options );\n    }\n\n\n    //debug\n    if( fupl_options.debug ) {\n      /* eslint-disable */\n      console.groupCollapsed('FileUploader options');\n      // creazione di un oggetto bidimensinale per\n      // semplificare la rappresentazione in tabella\n      let c_options = {},\n      c_keys = Object.keys(fupl_options);\n      c_keys.sort();\n      c_keys.forEach(item => {\n        let _toStringify = typeof fupl_options[item] === 'object' &&\n        fupl_options[item] !== null &&\n          item !== 'element';\n        c_options[item] = _toStringify ? JSON.stringify(fupl_options[item], null, ' ') : fupl_options[item];\n      });\n      console.table(c_options);\n      console.groupCollapsed('fupl_options');\n        console.log(fupl_options);\n      console.groupEnd();\n      console.groupEnd();\n      /* eslint-enable */\n    } // end if debug\n\n\n  }; // end upl.createUploader\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n\n  /*\n  Aggiunge un elemento a fupl_options.istance_result_wrapper\n  e imposta i necessari listeners\n\n  item_data è l'oggetto con i dati dell'elemento:\n\n  {\n    id    → identificativo univoco del file (può essere anche il percorso sul server)\n    name  → nome del file\n    url   → url per eventuale tag <a> presente nell'elemento (se immagine può essere assente o null)\n    src   → attributo `src` obbligatorio se immagine, oppure assente o null\n    wi    → larghezza in px se immagine oppure assente o null\n    he    → altezza in px se immagine oppure assente o null\n    size  → dimensione in bytes\n    loading → true se se si tratta di un elemento in fase di upload\n    [...] → eventuali campi aggiuntivi specifici dell'istanza\n  }\n\n  */\n\n  upl.createItem = (item_data, fupl_options) => {\n\n    try {\n\n      let item_markup = fupl_options.templates[fupl_options._type][fupl_options._mode];\n      if( item_markup === null && fupl_options._mode === 'multiple' ) {\n        item_markup = fupl_options.templates[fupl_options._type]['single'];\n      }\n\n      let fupl_item_wrapper = document.createElement('div'); // wrapper da rimuovere al momento dell'inserimento\n      fupl_item_wrapper.innerHTML = item_markup;\n\n      // aggiunta pulsante rimozione\n      fupl_item_wrapper.querySelector('.fupl-remove').innerHTML = fupl_options.templates.remove_btn;\n\n\n\n      /*\n        aggiunta dati specifici dell'elemento:\n\n        elementi interni a fupl-item:\n          .fupl-file-name\n          .fupl-file-size\n          .fupl-img →  img\n          .fupl-img → a.href\n          .fupl-doc →  a.href\n\n      */\n\n      // nome file\n      let fupl_file_name = fupl_item_wrapper.querySelector('.fupl-file-name');\n      if(fupl_file_name && item_data.name ) {\n        fupl_file_name.innerHTML = item_data.name;\n      }\n\n      // info dimensioni\n      let fupl_file_size = fupl_item_wrapper.querySelector('.fupl-file-size');\n      if(fupl_file_size ) {\n        let size_string = '';\n        if(fupl_options._type === 'img' && item_data.wi && item_data.he) {\n          size_string = item_data.wi + '&times;' + item_data.he + '<span class=\"fupl-unit\">px</span>';\n          if(item_data.size) {\n            size_string += ' &ndash; ';\n          }\n        }\n        if(item_data.size) {\n          size_string += upl.parse_filesize(item_data.size, fupl_options.locales);\n        }\n\n        fupl_file_size.innerHTML = size_string;\n      }\n\n      // immagine\n      if( fupl_options._type === 'img' ) {\n        fupl_item_wrapper.querySelector('.fupl-img').src = item_data.src;\n      }\n\n      // url\n      let fupl_url = fupl_item_wrapper.querySelector('.fupl-url');\n      if( fupl_url && item_data.url) {\n        fupl_url.href = item_data.url;\n      }\n\n      let fupl_item = fupl_item_wrapper.querySelector('.fupl-item');\n      // id elemento per eventuale cancellazione\n      if(item_data.id) {\n        fupl_item.dataset[upl.data_attributes.item_id] = item_data.id;\n      }\n\n      if(item_data.loading) {\n        fupl_item.classList.add('fupl-is-loading');\n        fupl_item.insertAdjacentHTML('beforeend',\n          fupl_options.templates.loading_markup\n        );\n      }\n\n      if(fupl_options._mode === 'single') {\n        fupl_options.istance_result_wrapper.innerHTML = fupl_item_wrapper.innerHTML;\n      } else {\n        fupl_options.istance_result_wrapper.insertAdjacentHTML('beforeend',\n          fupl_item_wrapper.innerHTML\n        );\n      }\n\n      // aggiunta evento trigger eliminazione elemento\n      fupl_item_wrapper = fupl_options.istance_result_wrapper.querySelector('.fupl-item:last-child');\n      fupl_item_wrapper.querySelector('.fupl-remove-trigger').addEventListener('click', () => {\n        // se l'id non è impostato si tratta di un nuovo elemento,\n        // e non va eseguita la cancellazione sul server\n        let id = fupl_item_wrapper.dataset[upl.data_attributes.item_id];\n        fupl_item_wrapper.remove();\n        if(id) {\n          fupl_options.wrapper.insertAdjacentHTML('beforeend',\n            `<input type=\"hidden\" name=\"${fupl_options.delete_varname}\" value=\"${id}\">`\n          );\n        }\n\n        // controllo se istance_result_wrapper è vuoto\n        // in caso positivo aggiunta testo `no_file` ed impostazione su false\n        // di fupl_options.wrapper.dataset[upl.data_attributes.hasValues]\n        if( !fupl_options.istance_result_wrapper.querySelectorAll('.fupl-item').length ) {\n          fupl_options.istance_result_wrapper.innerHTML = fupl_options.templates.no_file[fupl_options._type];\n          fupl_options.wrapper.dataset[upl.data_attributes.hasValues] = 'false';\n        }\n\n      });\n\n      return fupl_options.istance_result_wrapper.querySelector('.fupl-item:last-child');\n\n    } catch(e) {\n      console.error(e); // eslint-disable-line\n    }\n\n  }; // end upl.createItem\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  // https://www.smashingmagazine.com/2018/01/drag-drop-file-uploader-vanilla-js/\n  upl.setListeners = (fupl_options) => {\n\n    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n      fupl_options.element.addEventListener(eventName, (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n      }, false);\n    });\n\n    ['dragover', 'dragenter'].forEach(eventName => {\n      fupl_options.element.addEventListener(eventName, () => {\n        fupl_options.element.classList.add( fupl_options.element_dragover_class );\n      }, false);\n    });\n\n    ['dragleave', 'dragend'].forEach(eventName => {\n      fupl_options.element.addEventListener(eventName, () => {\n        fupl_options.element.classList.remove( fupl_options.element_dragover_class );\n      }, false);\n    });\n\n    fupl_options.element.addEventListener('drop', (e) => {\n      fupl_options.element.classList.remove( fupl_options.element_dragover_class );\n\n      let files = e.dataTransfer.files;\n\n      if( !fupl_options.multiple && files.length > 1 ) {\n        fupl_options.alert_api(fupl_options.alert_messages.tooMuchFiles, fupl_options);\n      } else {\n        upl.sendFiles( files, fupl_options );\n      }\n    }, false);\n\n    // selezione tramite input\n    fupl_options.istance_input.addEventListener('change', () => {\n      upl.sendFiles( fupl_options.istance_input.files, fupl_options );\n    });\n\n  }; // end upl.createItem\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  /*\n\tsendFiles\n\tEsegue i controlli impostati, quindi la chiamata ajax e produce\n\til feedback per l'utente\n\t*/\n  upl.sendFiles = (filelist, fupl_options) => {\n\n\n    /*\n    disable_submit\n    disabilita il form fino a caricamento completato\n    */\n    const disable_submit = (modo) => {\n      // modo === true → disable, false → enable\n      const _form = fupl_options.element.closest('form');\n\n      if(fupl_options.disable_submit && _form) {\n        const submit_btns = _form.querySelectorAll('[type=\"submit\"');\n        submit_btns.forEach( btn => {\n          btn.disabled = modo;\n        });\n\n        const submitHandler = (e) => {\n          e.preventDefault();\n          return false;\n        };\n        if(modo === true) {\n          _form.addEventListener('submit', submitHandler, false);\n        } else {\n          _form.removeEventListener('submit', submitHandler, false);\n        }\n\n      }\n    },\n\n    /*\n    uploadFile\n    esegue l'upload Ajax\n    https://www.smashingmagazine.com/2018/01/drag-drop-file-uploader-vanilla-js/\n\n    current_item contiene:\n      - `id`: id univoco dell'elemento\n      - `file`: oggetto filelist\n      - `width` e height: dimensioni in pixel dell'immagine.\n                  null se non si tratta di immagini\n      - `tmp_file`: nel caso di nuovi elementi: nome del file temporaneo\n\n    */\n    uploadFile = function ( current_item, img_preview ) {\n\n      // aggiunta elemento all'uploader\n      let this_item = upl.createItem({\n          id   : null,\n          name : current_item.file.name,\n          url  : null,\n          src  : img_preview,\n          wi   : current_item.width,\n          he   : current_item.height,\n          size : current_item.file.size,\n          loading:true\n      }, fupl_options),\n\n      xhr_error_message = fupl_options.alert_messages.xhrError.replace(/{{filename}}/, current_item.file.name);\n\n      //console.log(this_item); // eslint-disable-line\n\n      const remove_item_on_error = () => {\n        this_item.querySelector('.fupl-remove-trigger').click();\n      };\n\n      /*\n      Funzione callback personalizzata\n      Vedi `_set_options.js` per tutti i parametri\n      */\n      if( fupl_options.upload_start_callback && typeof fupl_options.upload_start_callback === 'function') {\n        fupl_options.upload_start_callback({\n          'item'              : current_item,\n          'img_preview'       : img_preview,\n          'uploader_options'  : fupl_options\n        });\n      }\n\n      new Promise(function(resolve, reject) {\n        let ajax = new XMLHttpRequest();\n        ajax.open( 'POST', fupl_options.uploader_url, true );\n\n        ajax.onload = function() {\n\n          if( ajax.status >= 200 && ajax.status < 400 ) {\n\n            const response = JSON.parse( ajax.responseText );\n\n            /*\n              jsonResponse:\n              {\n                \"tmp_file\": \"file_temporaneo\",\n                \"error\": null\n              }\n            */\n            if(response.error) {\n\n              fupl_options.alert_api( xhr_error_message, fupl_options );\n              /* eslint-disable */\n              console.error( response.error );\n              /* eslint-enable */\n\n              reject();\n\n            } else {\n              current_item.tmp_file = response.tmp_file;\n              resolve();\n            }\n\n            /*\n            Funzione callback personalizzata\n            Vedi `_set_options.js` per tutti i parametri\n            */\n            if( fupl_options.upload_complete_callback && typeof fupl_options.upload_complete_callback === 'function') {\n              fupl_options.upload_complete_callback({\n                'item'          : current_item,\n                'server_error'  : response.error,\n                'fupl_options'  : fupl_options\n              });\n            }\n\n\n          } else {\n            fupl_options.alert_api( xhr_error_message, fupl_options );\n            /* eslint-disable */\n            console.error( ajax.status, ajax.statusText );\n            console.error( ajax.responseText );\n            /* eslint-enable */\n          }\n\n          reject();\n        };\n\n        ajax.onerror = function() {\n          fupl_options.alert_api( xhr_error_message, fupl_options );\n          /* eslint-disable */\n          if(fupl_options.debug) {\n            console.error( ajax.status,  ajax.statusText );\n            console.error( ajax.responseText );\n          }\n          /* eslint-enable */\n\n          reject();\n        };\n\n        ajax.onprogress = function (e) {\n          let perc_loaded = Math.round(e.loaded * 100.0 / e.total) || 0;\n          //console.log(e.loaded ,e.total, perc_loaded); // eslint-disable-line\n          perc_loaded = perc_loaded === Infinity? 100 : perc_loaded;\n          this_item.querySelector('.fupl-progress').value = perc_loaded;\n\n        };\n\n\n        let fileData = new FormData();\n        fileData.append('file', current_item.file);\n        ajax.send( fileData );\n      }) // end promise\n      .then(\n        // resolve\n        function (  ) {\n          //console.log('resolve'); // eslint-disable-line\n          this_item.classList.remove('fupl-is-loading');\n          this_item.querySelector('.fupl-loading').remove();\n\n          this_item.insertAdjacentHTML('beforeend',\n            upl.buildHiddenFields(current_item, fupl_options)\n          );\n\n          // il contenitore viene indicato \"con valori\"\n          fupl_options.wrapper.dataset[upl.data_attributes.hasValues] = 'true';\n\n          //Se non ci sono altri elemento in caricamento, disable_submit viene annullato\n          if( !fupl_options.istance_result_wrapper.querySelector('.fupl-item.fupl-is-loading')) {\n            disable_submit(false);\n          }\n        },\n        //reject\n        function (  ) {\n          //console.log('reject'); // eslint-disable-line\n          remove_item_on_error();\n        }\n      );\n\n    };\n\n    // disabilitazione form\n    disable_submit(true);\n\n    if( filelist.length ) {\n\n      let upload_promises = [];\n\n      // https://stackoverflow.com/questions/38362231/\n      //how-to-use-promise-in-foreach-loop-of-array-to-populate-an-object\n      [...filelist].forEach(function (filelist_item, idx) {\n        try {\n\n          let current_item = {\n            id: 'fupl_item_' + (+new Date()) + '_' + idx, // id unico\n            file: filelist_item,\n            width: null,\n            height: null,\n            tmp_file: null\n          };\n\n          // controllo filetype (per drag&drop e browser che non supportano accept)\n          if( fupl_options.accept.length ) {\n            let ext = filelist_item.name.split('.').pop().toLowerCase();\n            if( fupl_options.accept.indexOf( filelist_item.type ) === -1 &&\n              fupl_options.accept.indexOf( '.' + ext ) === -1) {\n\n              throw fupl_options.alert_messages.fileFormatError\n                .replace(/{{file_name}}/, filelist_item.name );\n            }\n          } // end controllo filetype\n\n          // controllo maxfilesize\n          if( fupl_options.max_filesize !== null ) {\n            if( filelist_item.size > fupl_options.max_filesize.maxbytes ) {\n              let item_parsed_size = upl.parse_filesize(filelist_item.size, fupl_options.locales);\n\n              throw fupl_options.alert_messages.fileSizeError\n                .replace(/{{file_name}}/, filelist_item.name )\n                .replace(/{{file_size}}/, item_parsed_size )\n                .replace(/{{allowed_size}}/, fupl_options.max_filesize.feedback_size );\n\n            }\n          } // end controllo maxfilesize\n\n          // analisi immagine e caricamento\n          if(fupl_options.filetype === 'img') {\n\n            let reader  = new FileReader();\n            reader.addEventListener(\"load\", function () {\n\n              let image = new Image();\n              image.src = reader.result;\n              image.addEventListener(\"load\", function () {\n\n                let err_mes = [];\n                current_item.width=image.width;\n                current_item.height=image.height;\n\n                if( fupl_options.img_w && image.width !== fupl_options.img_w ) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_exact_width_err\n                      .replace(/{{image_dimension}}/, image.width)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_w)\n                  );\n\n                } else if(fupl_options.img_min_w && image.width < fupl_options.img_min_w) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_min_width_err\n                      .replace(/{{image_dimension}}/, image.width)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_min_w)\n                  );\n\n                } else if(fupl_options.img_max_w && image.width > fupl_options.img_max_w) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_max_width_err\n                      .replace(/{{image_dimension}}/, image.width)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_max_w)\n                  );\n                }\n\n                if (fupl_options.img_h && image.height !== fupl_options.img_h) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_exact_height_err\n                      .replace(/{{image_dimension}}/, image.height)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_h)\n                  );\n\n                } else if(fupl_options.img_min_h && image.height < fupl_options.img_min_h) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_min_height_err\n                      .replace(/{{image_dimension}}/, image.height)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_min_h)\n                  );\n\n                } else if(fupl_options.img_max_h && image.height > fupl_options.img_max_h) {\n                  err_mes.push(\n                    fupl_options.alert_messages.img_max_height_err\n                      .replace(/{{image_dimension}}/, image.height)\n                      .replace(/{{allowed_dimension}}/, fupl_options.img_max_h)\n                  );\n                }\n\n                if( err_mes.length ) {\n                  fupl_options.alert_api(\n                    fupl_options.alert_messages.img_err_start_string\n                    .replace(/{{file_name}}/, filelist_item.name ) + '<br>' +\n                    '<ul><li>' + err_mes.join('</li><li>') + '</li></ul>',\n                  fupl_options );\n                } else {\n                  uploadFile( current_item, reader.result );\n                }\n\n              }, false); // end image.addEventListener(\"load\"\n\n            }, false); // end reader.addEventListener(\"load\"\n\n            reader.readAsDataURL( filelist_item );\n\n          } else { // non immagine\n            upload_promises.push(uploadFile( current_item ));\n\n          } // end if image\n\n        } catch (errormessage) {\n          fupl_options.alert_api( errormessage, fupl_options );\n        }\n      }); // end foreach\n\n    } // end if( filelist.length )\n\n  }; // end upl.sendFiles\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  /*\n    elimina i caratteri ascii > 127\n    Restituisce la stringa normalizzata\n  */\n  const normalize_file_name = function (filename) {\n    let converted = \"\";\n    const conversionTable = { // Reference table Unicode vs ASCII\n      'à' : 'a', // 224\n      'è' : 'e', // 232\n      'é' : 'e', // 233\n      'ì' : 'i', // 236\n      'ò' : 'o', // 242\n      'ù' : 'u', // 249\n      'À' : 'A', // 192\n      'È' : 'E', // 200\n      'É' : 'E', // 201\n      'Ì' : 'I', // 204\n      'Ò' : 'O', // 210\n      'Ù' : 'U', // 217\n      \"'\" : '_', // 39\n      '|' : '_', // 124\n      '!' : '_', // 33\n      '\"' : '_', // 34\n      '$' : '_', // 36\n      '%' : '_', // 37\n      '&' : '_', // 38\n      '/' : '_', // 47\n      '(' : '_', // 40\n      ')' : '_', // 41\n      '=' : '_', // 61\n      '?' : '_', // 63\n      '^' : '_', // 94\n      '*' : '_', // 42\n      '[' : '_', // 91\n      ']' : '_', // 93\n      'ç' : 'c', // 231\n      '@' : '_', // 64\n      '#' : '_', // 35\n      '<' : '_', // 60\n      '>' : '_', // 62\n      'ü' : 'u', // 252\n      'Ü' : 'U', // 220\n      'ñ' : 'n', // 241\n      'Ñ' : 'N', // 209\n      '~' : '_', // 126\n      ':' : '_',\n      '\\\\' : '_'\n    };\n\n    for(var i = 0; i < filename.length; i++) {\n      if( filename[i] in conversionTable) {\n        converted += conversionTable[filename[i]];\n\n      } else if(filename.charCodeAt(i) === 768 || filename.charCodeAt(i) === 769 ) { // accento grave e accento acuto\n        converted += '';\n\n      } else if(filename.charCodeAt(i) > 127 ) {\n        converted += '_';\n\n      } else {\n        converted += filename.charAt(i);\n      }\n    }\n\n    return converted.replace(/ /g, '_').replace(/_+/g, '_');\n  };\n\n  /*\n  buildHiddenFields\n  genera i campi hidden con i valori da restituire al server.\n  Restituisce la stringa dei campi hidden\n  */\n  upl.buildHiddenFields = (current_item, fupl_options) => {\n\n    let hidden_fields = '',\n    field_values = {\n      'tmp_file'  : current_item.tmp_file,\n      'file_name' : normalize_file_name(current_item.file.name),\n      'size'      : current_item.file.size,\n      'type'      : current_item.file.type\n    };\n\n    if(fupl_options._type === 'img') {\n      field_values.width = current_item.width;\n      field_values.height = current_item.height;\n    }\n\n    for (let _key in field_values) {\n      hidden_fields += '<input type=\"hidden\" '+\n        'name=\"' + fupl_options.varname + '[' + current_item.id +'][' + _key + ']\" '+\n        'value=\"' + field_values[_key] +'\">';\n    }\n\n    return '<div class=\"fupl-hiddens\">' + hidden_fields + '</div>';\n\n  };\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n  \"use strict\";\n\n\n  /**\n\t * create_info_text\n\t * (funzione) Genera la stringa riepilogativa delle limitazioni da rispettare\n\t * per la selezione dei file\n\t *\n   * - Restituisce la stringa informativa\n\t */\n\tupl.create_info_text = fupl_options => {\n    let info_text = [];\n\n    if( fupl_options.filetype === 'img' ) {\n      info_text.push( 'immagini in formato <strong>JPEG</strong>, <strong>PNG</strong>, <strong>GIF</strong> o <strong>WEBP</strong>' );\n\n      if( fupl_options.img_w && fupl_options.img_h ) {\n        info_text.push( 'dimensioni: <strong>' +  fupl_options.img_w + '&times;' + fupl_options.img_h + 'px</strong>');\n\n      } else {\n\n        if(fupl_options.img_w && fupl_options.img_h && fupl_options.img_w === fupl_options.img_h) {\n          info_text.push( 'larghezza e altezza <strong>' +  fupl_options.img_h + 'px</strong>');\n\n        } else if(fupl_options.img_min_w && fupl_options.img_min_h && fupl_options.img_min_w === fupl_options.img_min_h) {\n          info_text.push( 'larghezza e altezza non inferiori a <strong>' +  fupl_options.img_min_w + 'px</strong>');\n\n        } else if(fupl_options.img_max_w && fupl_options.img_max_h && fupl_options.img_max_w === fupl_options.img_max_h) {\n          info_text.push( 'larghezza e altezza non superiori a <strong>' +  fupl_options.img_max_w + 'px</strong>');\n\n        } else {\n\n          if( fupl_options.img_w ) {\n            info_text.push( 'larghezza <strong>' +  fupl_options.img_w + 'px</strong>');\n\n          } else if( fupl_options.img_min_w && fupl_options.img_max_w ) {\n            info_text.push( 'larghezza compresa tra <strong>' +  fupl_options.img_min_w + 'px</strong> e <strong>' + fupl_options.img_max_w + 'px</strong>');\n\n          } else if( fupl_options.img_min_w ) {\n            info_text.push( 'larghezza non inferiore a <strong>' +  fupl_options.img_min_w + 'px</strong>');\n\n          } else if( fupl_options.img_max_w  ) {\n            info_text.push( 'larghezza non superiore a <strong>' +  fupl_options.img_max_w + 'px</strong>');\n          }\n\n          if( fupl_options.img_h ) {\n            info_text.push( 'altezza <strong>' +  fupl_options.img_h + 'px</strong>');\n\n          } else if( fupl_options.img_min_h && fupl_options.img_max_h ) {\n            info_text.push( 'altezza compresa tra <strong>' +  fupl_options.img_min_h + 'px</strong> e <strong>' + fupl_options.img_max_h + 'px</strong>');\n\n          } else if( fupl_options.img_min_h ) {\n            info_text.push( 'altezza non inferiore a <strong>' +  fupl_options.img_min_h + 'px</strong>');\n\n          } else if( fupl_options.img_max_h  ) {\n            info_text.push( 'altezza non superiore a <strong>' +  fupl_options.img_max_h + 'px</strong>');\n          }\n        }\n      }\n\n    } else if( fupl_options.filetype === 'pdf' ) {\n      info_text.push( 'file in formato <strong>PDF</strong>' );\n    }\n\n    if( fupl_options.max_filesize !== null ) {\n      info_text.push( 'max <strong>' + fupl_options.max_filesize.feedback_size + '</strong>' );\n    }\n\n    let str = info_text.join(fupl_options.info_text_join_string);\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n\n    if(fupl_options.info_text_wrap_string && str) {\n      str = fupl_options.info_text_wrap_string[0] + str + fupl_options.info_text_wrap_string[1];\n    }\n    return str;\n\t};\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ( (upl) => {\n\n  // parametri di default condivisi da tutte le istanze\n  const default_options = {\n\n    // percorso del css FileUploader\n    css: null,\n\n    // Attiva la modalit&agrave; debug che mostra in console le informazioni\n    // sulla configurazione corrente\n    debug: false,\n\n    // locales string, usata per la formattazione della stringa numerica\n    // mostrata all'utente ricavata da `max_filesize`\n    locales: 'it-IT',\n\n    // messaggio browser non compatibile\n    unsuitableBrowserMessage: 'Il tuo browser non ha tutte le funzionalità richieste ' +\n      'da questa applicazione. Utilizza un browser più aggiornato',\n\n    // messaggio IE\n    IE_alert: \"Stai utilizzando un browser non compatibile con questa applicazione.\\n\" +\n      \"Utilizza la versione più recente di Firefox, Edge, Safari, Opera o Chrome\",\n\n    // Interfaccia per l'invio di messaggi di errore\n    // mes  →  chiave dell'oggetto `alert_messages` con il testo del messaggio di errore\n    // type →  uno tra info, error, warning\n    // opts →  l'oggetto file uploader options corrente\n    alert_api: (mes, opts, type = error) => { window.alert(opts.alert_messages.mes);}, // eslint-disable-line\n\n    // testo dei messaggi errore\n    // eventuali segnaposti sono sotituiti nell'applicazione\n    alert_messages: {\n      tooMuchFiles: 'Puoi selezionare un solo file!', // tentativo di trascinare più file con uploader singolo\n      xhrError: 'Si &egrave; verificato un errore nel caricamento del file &ldquo;<strong>{{file_name}}</strong>&rdquo;.', // errore ajax\n      fileFormatError: 'Il file &ldquo;<strong>{{file_name}}</strong>&rdquo; &egrave; di un formato non consentito',\n      fileSizeError: 'Le dimensioni di &ldquo;<strong>{{file_name}}</strong>&rdquo; ({{file_size}}) '+\n        'superano il valore massimo consentito ({{allowed_size}})',\n\n      // immagini\n      img_err_start_string: \"L'immagine &ldquo;<strong>{{file_name}}</strong>&rdquo; non è corretta:\",\n      img_exact_width_err: \"Larghezza non corrispondente ({{image_dimension}}px invece di {{allowed_dimension}}px)\",\n      img_min_width_err: \"Larghezza inferiore a quella minima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)\",\n      img_max_width_err: \"Larghezza superiore a quella massima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)\",\n      img_exact_height_err: \"Altezza non corrispondente ({{image_dimension}}px invece di {{allowed_dimension}}px)\",\n      img_min_height_err: \"Altezza inferiore a quella minima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)\",\n      img_max_height_err: \"Altezza superiore a quella massima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)\"\n    },\n\n    // Url dello script lato server che esegue il caricamento del file\n    // per l'istanza in esame. Ha la precedenza sull'impostazione globale\n    // obbligatorio\n    uploader_url: null,\n\n    // Tipologia dei file selezionabili\n    // il valore deve corrispondere ad una delle chievi dell'array `mimetypes`\n    filetype: 'auto',\n\n    /*\n    Stringa di estensioni o mimetypes separati da virgola accettabili per l'uploader\n    corrente in aggiunta o sostituzione di quanto impostato tramite il parametro `filetype`.\n\n    L'eventuale attributo `accept` del campo input contenuto\n    nel contenitore uploader (se presente), svolge la stessa funzione.\n\n    In entrambi i casi, i valori sono presi in considerazione solo se `filetype == 'auto'`\n\n    In presenza sia del parametro che dell'attributo `accept`, viene effettuato un merge,\n    e l'attributo ha la precedenza sul parametro.\n    Se il parametro &egrave; `null` e l'attributo `accept` non &egrave; presente,\n    con `filetype == auto` vengono accettati tutti i tipi di file.\n    */\n    accept: null,\n\n    /*\n    Parametro multiple.\n    Attiva la possibilit&agrave; di acquisire pi&ugrave; file con lo stesso uploader.\n    L'attivazione di questa opzione pu&ograve; essere effettuata anche tramite il parametro\n    del campo `input` /se presente)\n    */\n    multiple: false,\n\n    /*\n    Parametro required.\n    Eventuale impostazione del campo come obbligatorio.\n    L'attivazione di questa opzione pu&ograve; essere effettuata anche tramite il parametro\n    del campo `input` /se presente)\n    */\n    required: false,\n\n    /*\n    Disabilita (se presente) il form in cui &egrave; incluso l'uploader (disabilita anche iul pulsante submit)\n    da usare solo se nel form non sono presenti altri interazioni che potrebbero\n    entrare in collisione con questa opzione\n    */\n    disable_submit: false,\n\n    /*\n      Template dei markup utilizzati\n      - `main`         : markup principale inserito dentro l'elemento indicato da\n                         `upl.global_options.selector`. L'elemento, a cui viene inoltre\n                         aggiunta la classe `flup`, viene inoltre racchiuso in un elemento\n                         `div.flup-wrapper`\n\n      - `single_img`   : template aggiuntivo per immagini singole\n      - `multiple_imgs`: template aggiuntivo per immagini multiple\n      - `single_doc`   : template aggiuntivo per documenti singoli\n      - `multiple_docs`: template aggiuntivo per documenti multipli\n      - `no_file`      : template per indicare l'assenza di file\n\n      Consulta il readme per ulteriori dettagli.\n\n      Il markup di default utilizza classi di Boostrap 4.\n\n      L'eventuale contenuto dell'elemento originale viene eliminato (pu&ograve; contenere\n      un elemento type[file] per eventuale procedura di fallback)\n\n      I template possono essere alterati a piacimento, purch&eacute; si mantengano le classi\n      `fupl-*` utilizzate nella procedura.\n\n      I template delle immagini, devono contenere il tag img\n\n      doc e img multipli possono essere null, in questo caso vengono utilizzati\n      gli stessi markup per singolo file\n    */\n    templates: {\n      // wrapped in <div class=\"fupl-wrapper\"><div class=\"fupl\"></div></div>\n      main: '<div class=\"fupl-result\"></div>' +\n        '<div class=\"fupl-panel\">' +\n          '<div class=\"fupl-button\">' +\n            '<label><input type=\"file\"></label>' +\n            '<div class=\"fupl-dd-text\">{</div>' +\n          '</div>' +\n          '<div class=\"fupl-info-text\"></div>' +\n        '</div>',\n\n      // contenuto di fupl-result quando non sono presenti files\n      no_file: {\n        img: '<div class=\"fupl-result-empty text-muted small font-italic\">Nessuna immagine presente</div>',\n        doc: '<div class=\"fupl-result-empty text-muted small font-italic\">Nessun file presente</div>'\n      },\n\n      // trigger per la rimozione di un elemento da .fupl_results\n      // è aggiunto all'interno dell'elemento `.fupl-remove`, presente in ognuno\n      // degli elementi successivi\n      // Deve essere un elemento button\n      remove_btn: '<button type=\"button\" class=\"close fupl-remove-trigger\" aria-label=\"Elimina\" title=\"Elimina questo file\">' +\n            '<span aria-hidden=\"true\">&times;</span>' +\n          '</button>',\n\n      // markup aggiunto agli elementi in fase di caricamento\n      loading_markup: '<div class=\"fupl-loading\"><progress class=\"fupl-progress\" max=100 value=0></progress></div>',\n\n      img: {\n        single: '<div class=\"fupl-item\">' +\n          '<div class=\"fupl-remove\"></div>' +\n          '<img alt=\"Immagine caricata\" class=\"img-fluid fupl-img\">' +\n          '<div class=\"fupl-file-info\">' +\n            '<div class=\"text-truncate fupl-file-name\"></div>' +\n            '<div class=\"fupl-file-size\"></div>' +\n          '</div>' +\n        '</div>',\n\n        multiple: '<div class=\"fupl-item\">' +\n            '<div class=\"fupl-remove\"></div>' +\n            '<div class=\"fupl-img-wrapper\">' +\n              '<img alt=\"Immagine caricata\" class=\"img-fluid fupl-img\">' +\n            '</div>' +\n            '<div class=\"fupl-file-info\">' +\n              '<div class=\"text-truncate fupl-file-name\"></div>' +\n              '<div class=\"fupl-file-size\"></div>' +\n            '</div>' +\n          '</div>'\n      },\n\n      doc : {\n        single: '<div class=\"fupl-item\">' +\n            '<div class=\"fupl-remove\"></div>' +\n            '<div class=\"fupl-doc text-truncate\">' +\n              '<a href=\"#\" class=\"text-truncate fupl-file-name fupl-url\"></a>' +\n            '</div>' +\n            '<span class=\"small ml-1 text-nowrap fupl-file-size\"></span>' +\n          '</div>',\n\n        multiple: null // usa single_doc\n      }\n    },\n\n    // Eventuale classe da aggiungere all'elemento FileUploader al\n    // momento dell'inizializzazione\n    element_class: null,\n\n    // Classe da aggiungere all'elemento FileUploader quando un file\n    // vi &egrave; trascinato sopra\n    element_dragover_class: 'fupl-is-dragover',\n\n    // Label da applicare da applicare all'elemento FileUploader.\n    // Se `null` e se esiste un elemento `label` all'interno dell'uploader,\n    // viene preso il testo dell'elemento\n    uploader_label_text: null,\n\n    // Opzione per l'aggiunta di un tag label prima dell'elemento uploader\n    uploader_add_label: true,\n\n    // Eventuale classe da aggiungere ad uploader_label\n    uploader_label_class: null,\n\n    /*\n    Array (o stringa json) dei testi del label del tag input (il primo elemento dell'array) e del testo\n    informativo per il drag &drop da inserire in `.fupl-dd-text` (il secondo elemento)\n    nelle varie combinazioni (img singola e multiple, doc singole e multipli)\n    segnaposti: ['{{input_label}}', '{{dd_text}}']\n    */\n    input_text: {\n      img: {\n        single:   [\"Seleziona un'immagine\", \"\\u2026oppure trascinala qui\"],\n        multiple: [\"Seleziona una o pi&ugrave; immagini\", \"\\u2026oppure trascinale qui\"]\n      },\n      doc: {\n        single: [\"Seleziona un documento\", \"\\u2026oppure trascinalo qui\"],\n        multiple: [\"Seleziona uno o pi&ugrave; documenti\", \"\\u2026oppure trascinali qui\"]\n      }\n    },\n\n    // classi da applicare al tag label dell'input[file] generato, utilizzato\n    // come pulsante per la selezione dei file\n    input_label_class: 'btn btn-outline-primary btn-sm',\n\n    // indica se mostrare o no il testo informativo su formati accettati,\n    // dimensioni immagini, ecc. Se si decide di non mostrarlo, potrebbe essere\n    // necessario rimuovere dal template l'elemento `.fupl-info-text`\n    show_info_text: true,\n\n    // stringhe aggiunte all'inizio e alla fine del testo informativo generato\n    // utilizzate solo se `custom_info_text` non &egrave; impostato\n    info_text_wrap_string: ['(', ')'],\n\n    // Stringa utilizzata per concatenare tra loro le varie parti del testo informativo generato\n    // utilizzata solo se `custom_info_text` non &egrave; impostato\n    info_text_join_string: ', ',\n\n    // Eventuale testo informativo personalizzato. se presente,\n    // sostituisce il testo generato in base ai formati, ai limiti di dimensioni, ecc.\n    custom_info_text: null,\n\n    /*\n    impostazioni per le immagini.\n    Applicate solo se filetype == 'img'.\n    Valori numerici che corrispondono alle dimensioni in pixel richieste per l'immagine.\n    I parametri img_min_* e img_max_* possono essere assegnati simultaneamente,\n    ma sono ignorati se esistono i corrispondenti parametri esatti (ad esempio,\n    se &egrave; presente img_w, i parametri img_min_w e img_max_w non vengono presi in considerazione).\n    Il valore di default di tutti i parametri &egrave; null, che significa che non vengono applicati.\n\n      * `img_min_w`: larghezza minima dell'immagine\n      * `img_max_w`: larghezza massima dell'immagine\n      * `img_w`: larghezza esatta dell'immagine\n      * `img_min_h`: altezza minima dell'immagine\n      * `img_max_h`: altezza massima dell'immagine\n      * `img_h`: altezza esatta dell'immagine\n    */\n    img_min_w   : null,\n    img_max_w   : null,\n    img_w       : null,\n    img_min_h   : null,\n    img_max_h   : null,\n    img_h       : null,\n\n\n    /*\n    Dimensione (peso) massima dell'immagine. Pu&ograve; essere un numero,\n    e in questo caso corrisponde ad una dimensione in KB, o una stringa\n    composta da un valore numerico e da un suffisso tra ‘KB’ e ‘MB’ (anche minuscoli).\n    Se il valore &egrave; null o se la stringa non viene riconosciuta,\n    non &egrave; applicato nessun limite.\n    */\n    max_filesize: null,\n\n    // Prefisso della variabile utilizzata per inviare al server i dati\n    // di ogni singolo file caricato. Il valore indicato &egrave; il nome base dell'array\n    // costruito per inviare i valori al server.\n    varname: 'file',\n\n    // Funzione richiamata dopo l'inizializzazione di ogni elemento FileUploader.\n    // La funzione viene invocata con l'oggetto di tutte le opzioni come argomento\n    init_callback: null,\n\n    /*\n    Funzione richiamata ogni volta che un file viene inviato al server.\n    La funzione viene invocata passandole un oggetto contenente:\n      * `item`: oggetto con i dati dell'elemento in esame:\n        - id: id univoco dell'elemento\n        - file: oggetto filelist corrente\n        - `width` e `height`: null o dimensioni in pixel dell'immagine\n        - `tmp_file`: nel caso di nuovi elementi: nome del file temporaneo\n      * `img_preview` : miniatura dell'immagine in forma di stringa Base64\n        (null se si tratta di altre tipologie)\n      * `fupl_options`: oggetto `options` corrente\n    */\n    upload_start_callback: null,\n\n    /*\n    Funzione richiamata ogni volta che un file viene caricato.\n    La funzione viene invocata passandole un oggetto contenente:\n      * `item`: oggetto con i dati dell'elemento in esame:\n        - `id`: id univoco dell'elemento\n        - `file`: oggetto filelist\n        - `width` e `height`: null o dimensioni in pixel dell'immagine\n        - `tmp_file`: nel caso di nuovi elementi: nome del file temporaneo\n      * `server_error`: null, se l'upload &egrave; stato completato correttamente. oppure\n          stringa con il messaggio di errore restituito\n      * `fupl_options`: oggetto `options` corrente\n    */\n    upload_complete_callback: null,\n\n    /*\n    Array json degli eventuali elementi preregistrati, nella forma:\n      [\n        {\n          id    → identificativo univoco del file (può essere anche il percorso sul server)\n          name  → nome del file\n          url   → url per eventuale tag <a> presente nell'elemento (se immagine può essere assente o null)\n          src   → attributo `src` obbligatorio se immagine, oppure assente o null\n          wi    → larghezza in px se immagine oppure assente o null\n          he    → altezza in px se immagine oppure assente o null\n          size  → dimensione in bytes\n          [...] → eventuali campi aggiuntivi specifici dell'istanza\n        }\n        [...]\n      ]\n\n      l'id viene aggiunto come attributo `data` al pulsante di eliminazione del file\n      (genera un hidden con l'id del file da eliminare dal server)\n    */\n    values: [],\n\n    // varname degli hidden con gli id dei file gi&agrave; registrati  da eliminare\n    delete_varname: 'elimina_file[]',\n\n// TODO\n    // attiva la possibilit&agrave; di riordinare gli elementi trascinandoli\n    // se true, i valori degli eventuali elementi preregistrati devono essere\n    // elencati nel josn `values` nell'ordine correttp\n    reorder: false,\n\n    // name della variabile hidden usata per registrare l'ordinamento\n    reorder_varname: 'order'\n\n// TODO gestione campi aggiuntivi\n  };\n\n  upl.setOptions = (...custom_options) => {\n\n    if( Object.assign && typeof Object.assign === \"function\") {\n      return Object.assign(\n        {},\n        default_options,\n        ...custom_options\n      );\n\n    } else { // IE 11\n      let opts = {};\n      for(let i in default_options) {\n        opts[i] = default_options[i];\n        custom_options.forEach( item => {\n          if(item[i] !== undefined) {\n            opts[i] = item[i];\n          }\n        });\n      }\n      return opts;\n    }\n  };\n\n  return upl;\n\n})(FileUploader2 || {});\n","/* globals FileUploader2:true */\n\nFileUploader2 = ((upl) => {\n\n  // mimetypes ed estensioni accettabili in base al parametro `filetype`.\n  // Il parametro `auto` accetta tutti i tipi di file (salvo eventuali limitazioni\n  // aggiunte tramite parametro e attributo `accept`)\n  upl.mimetypes = {\n    auto : null,\n    img  : ['image/png', 'image/jpeg', 'image/pjpeg', 'image/gif', 'image/webp',\n            '.png', '.jpg', '.jpeg', '.pjpg', '.pjpeg', '.gif', '.webp'],\n    pdf  : ['application/pdf', '.pdf']\n  };\n\n  // nomi degli attributi data utilizzati per controllare alcuni stati o eventi dell'uploader\n  upl.data_attributes = {\n    fupl_selector : 'file_uploader2', // nome dell'attributo data usato come selector (e acui si possonoa ssociare delle opzioni json)\n    required      : 'required', // true se il caricamento del file è obbligatorio\n    hasValues     : 'hasValues', // true se l'uploader congtiene dei file (prergistrati o meno)\n    item_id       : 'id' // id dell'elemento aggiunto all'uploader (se preregistrato)\n  };\n\n  upl.parse_filesize = (bytes, locales) => {\n    bytes = +bytes;\n    let mega = 1024*1024;\n    if(bytes >= mega ) {\n      return (bytes/mega).toLocaleString(locales, {maximumFractionDigits: 1}) + '<span class=\"fupl-unit\">MB</span>';\n    } else {\n      return Math.round(bytes/1024).toLocaleString(locales, {maximumFractionDigits: 0}) + '<span class=\"fupl-unit\">KB</span>';\n    }\n  };\n\n\n  /*\n   parse_max_filesize\n   elabora il parametro `filesize_value` (se esiste) e restituisce:\n    - `null` se `filesize_value` === null`\n    - `false` se `filesize_value` non è un valore corretto\n    - l'oggetto `{ maxbytes: 123456, unit: 'KB', feedback_size: ''}`\n    in cui:\n      - `maxbytes` è il valore in bytes del limite imposto\n      - `unit` è uno tra 'KB' e 'MB'\n      - `feedback_size` è la rappresentazione per un eventuale feedback per l'utente\n  */\n  upl.parse_max_filesize = (filesize_value, locales) =>  {\n    // controllo max_filesize ed elaborazione parametro\n    if( filesize_value ) {\n      var maxbytes, unit, feedback_size;\n\n      if(!isNaN(filesize_value)) { //solo numero, si assume siano KB\n        maxbytes = +filesize_value;\n        unit = 'KB';\n        feedback_size = maxbytes;\n\n      } else {\n\n        unit = filesize_value.substr(-2, 2).toUpperCase();\n        maxbytes = +filesize_value.substr(0, filesize_value.length-2);\n        feedback_size = maxbytes;\n\n        if(isNaN(maxbytes) || (unit !== 'KB' && unit !== 'MB') ) {\n          return false;\n        }\n      }\n\n      // se l'unità è indicata in KB ma il valore è più grande\n      // di un MB, il parametro viene aggiornato\n      if( maxbytes >= 1024 && unit === 'KB') {\n        unit = 'MB';\n        feedback_size = (Math.round((maxbytes / 1024) * 100) /100);\n      }\n\n      if(unit === 'KB') {\n        maxbytes = maxbytes * 1024;\n      } else {\n        maxbytes = maxbytes * 1024 * 1024;\n      }\n\n      return {\n        //'original_value': filesize_value,\n        //'unit'         : unit,\n        'maxbytes'     : maxbytes,\n        'feedback_size': feedback_size.toLocaleString(\n          locales, {maximumFractionDigits: (unit === 'KB'? 0 : 1)}\n        ) + '<span class=\"fupl-unit\">' + unit + '</span>'\n      };\n\n    } else {\n      return null;\n    }\n  };\n\n  return upl;\n\n})(FileUploader2 || {});\n"]}