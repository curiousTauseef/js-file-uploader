<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>File uploader extra fields demo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <style>
      label {
        font-size: .85rem;
        font-weight: bold;
        margin:0;
      }
    </style>

    <link rel="apple-touch-icon" sizes="180x180" href="http://primominuto.altervista.org/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://primominuto.altervista.org/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://primominuto.altervista.org/favicons/favicon-16x16.png">
    <link rel="manifest" href="http://primominuto.altervista.org/favicons/site.webmanifest">
    <link rel="mask-icon" href="http://primominuto.altervista.org/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="http://primominuto.altervista.org/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffc40d">
    <meta name="msapplication-config" content="http://primominuto.altervista.org/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body>
    <div class="container">
      <h1>File Uploader extra fields demo</h1>
      <p><a href="index.html">Demo summary</a> | <a href="https://github.com/massimo-cassandro/js-file-uploader#readme">Read me</a></p>

      <form action="" method="post" id="form1">
        <div
          id="demo1"
          data-file-uploader
          data-filetype="img"
          data-max_filesize="12Mb"
          data-uploader_legend="true"
          data-uploader_legend_text="Extra fields demo"
          data-multiple="true"
          data-sortable="true"
          data-values='[
            {
              "id": "123",
              "rel_id" : "1123",
              "name": "gigi-1508584-unsplash.jpg",
              "src": "test-files/gigi-1508584-unsplash.jpg",
              "wi": 1199,
              "he": 1600,
              "size": 175418,
              "publish": 1,
              "caption": "Simatai Great Wall, Beijing, China (@ling_gigi/Unsplash)"
            },
            {
              "id": "124",
              "rel_id" : "1124",
              "name": "fezbot2000-1511423-unsplash.jpg",
              "src": "test-files/fezbot2000-1511423-unsplash.jpg",
              "wi": 1067,
              "he": 1600,
              "size": 358840,
              "publish": 1,
              "caption": "Higashi-Tenno, Kyoto, Japan (@fezbot2000/Unsplash)"
            },
            {
              "id": "125",
              "rel_id" : "1125",
              "name": "ibrahim-rifath-787485-unsplash.jpg",
              "src": "test-files/ibrahim-rifath-787485-unsplash.jpg",
              "wi": 1920,
              "he": 1280,
              "size": 193345,
              "publish": 0,
              "caption": "Tomb of I’timād-ud-Daulah, Agra, India (@photoripey/Unsplash)"
            }
          ]'></div>


        <p><button id="disable_uploader" class="btn btn-outline-primary" type="button">Toggle disabled</button></p>
        <p><button class="btn btn-primary" type="submit">Submit</button></p>
      </form>

    </div>

    <script>
      // JS is used here to simplify string definition
      // This parameter is tipically set by server side scripting (and it would be really easier)
      let extrafields = [
        {
          "value_key": "publish",
          "use_rel_id": true,
          "markup":  `<div class="form-check form-group">
              <input class="form-check-input" type="checkbox"
                value="1" id="publish-{{idx}}" name="{{name}}" {{checked}}>
              <label class="form-check-label" for="publish-{{idx}}">
                Publish this photo
              </label>
            </div>`
        },
        {
          "value_key": "caption",
          "use_rel_id": true,
          "markup": `<div class="form-group">
              <label for="caption-{{idx}}">Caption</label>
              <input type="text" class="form-control form-control-sm" id="caption-{{idx}}"
                value="{{val}}" name="{{name}}">
            </div>`
        }
      ];

      document.getElementById('demo1').dataset.extra_fields = JSON.stringify(extrafields);

    </script>



    <script src="../dist/file_uploader-min.js"></script>
    <script src="test-files/en_localization.js"></script>
    <script>

      FileUploader.init({...en_localization, ...{
        debug: true,
        css: '../dist/file_uploader.css',
        uploader_url: 'server_side_demo_response.json',
        disable_submit: true
      }});

      document.getElementById('disable_uploader').addEventListener('click', () => {
        let fupl_el = document.getElementById('demo1');
        fupl_el.parentElement.toggleAttribute('disabled');
      },false);




    </script>
    <!-- <script src="../node_modules/m-layout-tools/dist/layout_tools-min.js"></script> -->
  </body>

</html>
